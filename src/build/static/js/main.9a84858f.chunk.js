(this.webpackJsonpuntitled1=this.webpackJsonpuntitled1||[]).push([[0],{262:function(e,t){},263:function(e,t){},264:function(e,t){},354:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a.n(r),o=a(9),c=a(0),i=a(182),s=a.n(i),l=a(2),d=a.n(l),u=a(20),m=a(15),p=a(74),b=a(184),h=a(22),j=a(21),f=a(62),v=a.n(f),x="mediasoup-demo",g=function(){function e(t){Object(h.a)(this,e),t?(this._debug=v()("".concat(x,":").concat(t)),this._warn=v()("".concat(x,":WARN:").concat(t)),this._error=v()("".concat(x,":ERROR:").concat(t))):(this._debug=v()(x),this._warn=v()("".concat(x,":WARN")),this._error=v()("".concat(x,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return Object(j.a)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}(),O=a(50),y=a(5),N=a(131),k=a.n(N),S=a(132);var w=a(93),_=a.n(w),P="mediasoup-demo.user",E="mediasoup-demo.devices";function C(e){var t=e.displayName;_.a.set(P,{displayName:t})}function T(){return _.a.getJSON(E)}function R(e){var t=e.webcamEnabled;_.a.set(E,{webcamEnabled:t})}var D,M=a(61),I=a.n(M),A=function(e){return{type:"SET_ROOM_STATE",payload:{state:e}}},L=function(e){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:e}}},V=function(e){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:e}}},q=function(e){return{type:"SET_DISPLAY_NAME",payload:{displayName:e}}},F=function(e){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:e}}},H=function(e){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:e}}},W=function(e){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:e}}},U=function(e){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:e}}},B=function(e){return{type:"ADD_PRODUCER",payload:{producer:e}}},z=function(e){return{type:"REMOVE_PRODUCER",payload:{producerId:e}}},Y=function(e,t){return{type:"SET_PRODUCER_TRACK",payload:{producerId:e,track:t}}},K=function(e,t){return{type:"SET_PRODUCER_SCORE",payload:{producerId:e,score:t}}},G=function(e){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:e}}},J=function(e){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:e}}},X=function(e){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:e}}},Q=function(e){return{type:"ADD_PEER",payload:{peer:e}}},Z=function(e){return{type:"REMOVE_PEER",payload:{peerId:e}}},$=function(e,t){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:e,peerId:t}}},ee=function(e,t){return{type:"ADD_CONSUMER",payload:{consumer:e,peerId:t}}},te=function(e,t){return{type:"REMOVE_CONSUMER",payload:{consumerId:e,peerId:t}}},ae=function(e,t){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:e,originator:t}}},re=function(e,t){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:e,originator:t}}},ne=function(e,t,a){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:e,spatialLayer:t,temporalLayer:a}}},oe=function(e,t,a){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:e,spatialLayer:t,temporalLayer:a}}},ce=function(e,t){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:e,priority:t}}},ie=function(e,t){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:e,score:t}}},se=function(e,t){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:e,peerId:t}}},le=function(e,t){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:e,peerId:t}}},de=function(e){return{type:"REMOVE_NOTIFICATION",payload:{notificationId:e}}},ue=function(e,t){return{type:"SET_DISPLAY_MODE",payload:{mode:e,screenId:t}}},me=function(e){return{type:"ADD_MESSAGE",payload:{message:e}}},pe=function(e){return{type:"SET_LOADER",payload:{visible:e}}},be=function(e){return{type:"SET_RECORDING_MESSAGE",payload:{message:e}}},he=function(e){var t=e.type,a=void 0===t?"info":t,r=e.text,n=e.title,o=e.timeout;if(!o)switch(a){case"info":o=3e3;break;case"error":o=5e3}var c={id:I()({length:6}).toLowerCase(),type:a,title:n,text:r,timeout:o};return function(e){e(function(e){return{type:"ADD_NOTIFICATION",payload:{notification:e}}}(c)),setTimeout((function(){e(de(c.id))}),o)}},je={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},fe={optional:[{googDscp:!0}]},ve=[{scaleResolutionDownBy:4,maxBitrate:5e5},{scaleResolutionDownBy:2,maxBitrate:1e6},{scaleResolutionDownBy:1,maxBitrate:5e6}],xe=[{scalabilityMode:"S3T3_KEY"}],ge=[{dtx:!0,maxBitrate:15e5},{dtx:!0,maxBitrate:6e6}],Oe=[{scalabilityMode:"S3T3",dtx:!0}],ye=new g("RoomClient"),Ne=function(){function e(t){var a=t.roomId,r=t.peerId,n=t.displayName,o=t.device,c=t.handlerName,i=t.useSimulcast,s=t.useSharingSimulcast,l=t.forceTcp,d=t.produce,u=t.consume,m=t.forceH264,p=t.forceVP9,b=t.svc,j=t.datachannel,f=t.externalVideo;Object(h.a)(this,e),ye.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',a,r,n,o.flag),this._closed=!1,this._displayName=n,this._device=o,this._forceTcp=l,this._produce=d,this._consume=u,this._useDataChannel=j,this._forceH264=Boolean(m),this._forceVP9=Boolean(p),this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,f&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.muted=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src="/resources/videos/video-audio-stereo.mp4",this._externalVideo.play().catch((function(e){return ye.warn("externalVideo.play() failed:%o",e)}))),this._handlerName=c,this._useSimulcast=i,this._useSharingSimulcast=s,this._protooUrl=function(e){var t=e.roomId,a=e.peerId;return"wss://".concat("meeting.unlockworld.net","/?roomId=").concat(t,"&peerId=").concat(a)}({roomId:a,peerId:r}),this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._webcams=new Map,this._webcam={device:null,resolution:"hd"},b&&(xe[0].scalabilityMode="".concat(b,"_KEY"),Oe[0].scalabilityMode=b)}return Object(j.a)(e,null,[{key:"init",value:function(e){D=e.store}}]),Object(j.a)(e,[{key:"close",value:function(){this._closed||(this._closed=!0,ye.debug("close()"),this._protoo.close(),this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),D.dispatch(A("closed")))}},{key:"join",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new k.a.WebSocketTransport(this._protooUrl),this._protoo=new k.a.Peer(t),D.dispatch(A("connecting")),this._protoo.on("open",(function(){return a._joinRoom()})),this._protoo.on("failed",(function(){D.dispatch(he({type:"error",text:"WebSocket connection failed"}))})),this._protoo.on("disconnected",(function(){D.dispatch(he({type:"error",text:"WebSocket disconnected"})),a._sendTransport&&(a._sendTransport.close(),a._sendTransport=null),a._recvTransport&&(a._recvTransport.close(),a._recvTransport=null),D.dispatch(A("closed"))})),this._protoo.on("close",(function(){a._closed||a.close()})),this._protoo.on("request",function(){var e=Object(o.a)(n.a.mark((function e(t,r,o){var c,i,s,l,d,u,m,p,b,h,j,f,v,x,g,O,N,k,w,_,P,E;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug('proto "request" event [method:%s, data:%o]',t.method,t.data),e.t0=t.method,e.next="newConsumer"===e.t0?4:"newDataConsumer"===e.t0?26:54;break;case 4:if(a._consume){e.next=7;break}return o(403,"I do not want to consume"),e.abrupt("break",54);case 7:return c=t.data,i=c.peerId,s=c.producerId,l=c.id,d=c.kind,u=c.rtpParameters,m=c.type,p=c.appData,b=c.producerPaused,e.prev=8,e.next=11,a._recvTransport.consume({id:l,producerId:s,kind:d,rtpParameters:u,appData:Object(y.a)(Object(y.a)({},p),{},{peerId:i})});case 11:h=e.sent,a._consumers.set(h.id,h),h.on("transportclose",(function(){a._consumers.delete(h.id)})),j=S.parseScalabilityMode(h.rtpParameters.encodings[0].scalabilityMode),f=j.spatialLayers,v=j.temporalLayers,D.dispatch(ee({id:h.id,type:m,locallyPaused:!1,remotelyPaused:b,rtpParameters:h.rtpParameters,spatialLayers:f,temporalLayers:v,preferredSpatialLayer:f-1,preferredTemporalLayer:v-1,priority:1,codec:h.rtpParameters.codecs[0].mimeType.split("/")[1],track:h.track},i)),r(),"video"===h.kind&&D.getState().me.audioOnly&&a._pauseConsumer(h),e.next=25;break;case 20:throw e.prev=20,e.t1=e.catch(8),ye.error('"newConsumer" request failed:%o',e.t1),D.dispatch(he({type:"error",text:"Error creating a Consumer: ".concat(e.t1)})),e.t1;case 25:return e.abrupt("break",54);case 26:if(a._consume){e.next=29;break}return o(403,"I do not want to data consume"),e.abrupt("break",54);case 29:if(a._useDataChannel){e.next=32;break}return o(403,"I do not want DataChannels"),e.abrupt("break",54);case 32:return x=t.data,g=x.peerId,O=x.dataProducerId,N=x.id,k=x.sctpStreamParameters,w=x.label,_=x.protocol,P=x.appData,e.prev=33,e.next=36,a._recvTransport.consumeData({id:N,dataProducerId:O,sctpStreamParameters:k,label:w,protocol:_,appData:Object(y.a)(Object(y.a)({},P),{},{peerId:g})});case 36:E=e.sent,a._dataConsumers.set(E.id,E),E.on("transportclose",(function(){a._dataConsumers.delete(E.id)})),E.on("open",(function(){ye.debug('DataConsumer "open" event')})),E.on("close",(function(){ye.warn('DataConsumer "close" event'),a._dataConsumers.delete(E.id),D.dispatch(he({type:"error",text:"DataConsumer closed"}))})),E.on("error",(function(e){ye.error('DataConsumer "error" event:%o',e),D.dispatch(he({type:"error",text:"DataConsumer error: ".concat(e)}))})),E.on("message",(function(e){if(ye.debug('DataConsumer "message" event [streamId:%d]',E.sctpStreamParameters.streamId),window.DC_MESSAGE=e,e instanceof ArrayBuffer){var t=new DataView(e).getUint32();return t==Math.pow(2,32)-1?(ye.warn("dataChannelTest finished!"),void(a._nextDataChannelTestNumber=0)):(t>a._nextDataChannelTestNumber&&ye.warn("dataChannelTest: %s packets missing",t-a._nextDataChannelTestNumber),void(a._nextDataChannelTestNumber=t+1))}if("string"===typeof e)switch(E.label){case"chat":var r=D.getState().peers,n=Object.keys(r).map((function(e){return r[e]})).find((function(e){return e.dataConsumers.includes(E.id)}));if(!n){ye.warn('DataConsumer "message" from unknown peer');break}D.dispatch(he({title:"".concat(n.displayName," says:"),text:e,timeout:5e3}));break;case"bot":D.dispatch(he({title:"Message from Bot:",text:e,timeout:5e3}))}else ye.warn('ignoring DataConsumer "message" (not a string)')})),window.DC=E,D.dispatch(se({id:E.id,sctpStreamParameters:E.sctpStreamParameters,label:E.label,protocol:E.protocol},g)),r(),e.next=53;break;case 48:throw e.prev=48,e.t2=e.catch(33),ye.error('"newDataConsumer" request failed:%o',e.t2),D.dispatch(he({type:"error",text:"Error creating a DataConsumer: ".concat(e.t2)})),e.t2;case 53:return e.abrupt("break",54);case 54:case"end":return e.stop()}}),e,null,[[8,20],[33,48]])})));return function(t,a,r){return e.apply(this,arguments)}}()),this._protoo.on("notification",(function(e){switch(ye.debug('proto "notification" event [method:%s, data:%o]',e.method,e.data),e.method){case"producerScore":var t=e.data,r=t.producerId,n=t.score;D.dispatch(K(r,n));break;case"newPeer":var o=e.data;D.dispatch(Q(Object(y.a)(Object(y.a)({},o),{},{consumers:[],dataConsumers:[]}))),D.dispatch(he({text:"".concat(o.displayName," has joined the room")}));break;case"peerClosed":var c=e.data.peerId;D.dispatch(Z(c));break;case"peerDisplayNameChanged":var i=e.data,s=i.peerId,l=i.displayName,d=i.oldDisplayName;D.dispatch($(l,s)),D.dispatch(he({text:"".concat(d," is now ").concat(l)}));break;case"downlinkBwe":ye.debug("'downlinkBwe' event:%o",e.data);break;case"consumerClosed":var u=e.data.consumerId,m=a._consumers.get(u);if(!m)break;m.close(),a._consumers.delete(u);var p=m.appData.peerId;D.dispatch(te(u,p));break;case"consumerPaused":var b=e.data.consumerId,h=a._consumers.get(b);if(!h)break;h.pause(),D.dispatch(ae(b,"remote"));break;case"consumerResumed":var j=e.data.consumerId,f=a._consumers.get(j);if(!f)break;f.resume(),D.dispatch(re(j,"remote"));break;case"consumerLayersChanged":var v=e.data,x=v.consumerId,g=v.spatialLayer,O=v.temporalLayer;if(!a._consumers.get(x))break;D.dispatch(ne(x,g,O));break;case"consumerScore":var N=e.data,k=N.consumerId,S=N.score;D.dispatch(ie(k,S));break;case"dataConsumerClosed":var w=e.data.dataConsumerId,_=a._dataConsumers.get(w);if(!_)break;_.close(),a._dataConsumers.delete(w);var P=_.appData.peerId;D.dispatch(le(w,P));break;case"activeSpeaker":var E=e.data.peerId;D.dispatch(L(E));break;case"peerMeetingChat":if(D.dispatch(me(e.data)),"speaker"!==D.getState().displayMode.mode){var C=e.data,T=C.sender,R=C.message;D.dispatch(he({text:"".concat(T," said ").concat(R)}))}break;case"peerSharingMyScreen":var M=e.data.shareScreenId;Boolean(M)?D.dispatch(ue("screen",e.data.shareScreenId)):D.dispatch(ue("grid",null));break;case"peerControlOverAudioVideoByHost":var I=e.data.type;"VIDEO"===I?(a.disableWebcam(),D.dispatch(he({type:"error",text:"Host turn off your camera"}))):"AUDIO"===I&&(a.muteMic(),D.dispatch(he({type:"error",text:"Host muted your microphone"})));break;case"peerEndCallForAll":a.close(),document.getElementById("unlockMeetingBodyId").remove(),document.getElementById("unlockMeetingEndId").style.display="block";break;case"peerRecordingStatus":var A=e.data.message;D.dispatch(be(A));break;default:ye.error('unknown protoo notification.method "%s"',e.method)}}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enableMic",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,o=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("enableMic()"),!this._micProducer){e.next=3;break}return e.abrupt("return");case 3:if(this._mediasoupDevice.canProduce("audio")){e.next=6;break}return ye.error("enableMic() | cannot produce audio"),e.abrupt("return");case 6:if(e.prev=6,this._externalVideo){e.next=15;break}return ye.debug("enableMic() | calling getUserMedia()"),e.next=11,navigator.mediaDevices.getUserMedia({audio:!0});case 11:a=e.sent,t=a.getAudioTracks()[0],e.next=19;break;case 15:return e.next=17,this._getExternalVideoStream();case 17:r=e.sent,t=r.getAudioTracks()[0].clone();case 19:return e.next=21,this._sendTransport.produce({track:t,codecOptions:{opusStereo:1,opusDtx:1}});case 21:this._micProducer=e.sent,D.dispatch(B({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1]})),this._micProducer.on("transportclose",(function(){o._micProducer=null})),this._micProducer.on("trackended",(function(){D.dispatch(he({type:"error",text:"Microphone disconnected!"})),o.disableMic().catch((function(){}))})),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(6),ye.error("enableMic() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error enabling microphone: ".concat(e.t0)})),t&&t.stop();case 32:case"end":return e.stop()}}),e,this,[[6,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableMic",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("disableMic()"),this._micProducer){e.next=3;break}return e.abrupt("return");case 3:return this._micProducer.close(),D.dispatch(z(this._micProducer.id)),e.prev=5,e.next=8,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),D.dispatch(he({type:"error",text:"Error closing server-side mic Producer: ".concat(e.t0)}));case 13:this._micProducer=null;case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"muteMic",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("muteMic()"),this._micProducer.pause(),e.prev=2,e.next=5,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 5:D.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),ye.error("muteMic() | failed: %o",e.t0),D.dispatch(he({type:"error",text:"Error pausing server-side mic Producer: ".concat(e.t0)}));case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"unmuteMic",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("unmuteMic()"),this._micProducer.resume(),e.prev=2,e.next=5,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 5:D.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),ye.error("unmuteMic() | failed: %o",e.t0),D.dispatch(he({type:"error",text:"Error resuming server-side mic Producer: ".concat(e.t0)}));case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableWebcam",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,o,c,i,s,l,d,u=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("enableWebcam()"),!this._webcamProducer){e.next=5;break}return e.abrupt("return");case 5:if(!this._shareProducer){e.next=8;break}return e.next=8,this.disableShare();case 8:if(this._mediasoupDevice.canProduce("video")){e.next=11;break}return ye.error("enableWebcam() | cannot produce video"),e.abrupt("return");case 11:if(D.dispatch(J(!0)),e.prev=12,this._externalVideo){e.next=27;break}return e.next=16,this._updateWebcams();case 16:if(a=this._webcam.device,r=this._webcam.resolution,a){e.next=20;break}throw new Error("no webcam devices");case 20:return ye.debug("enableWebcam() | calling getUserMedia()"),e.next=23,navigator.mediaDevices.getUserMedia({video:Object(y.a)({deviceId:{ideal:a.deviceId}},je[r])});case 23:o=e.sent,t=o.getVideoTracks()[0],e.next=32;break;case 27:return a={label:"external video"},e.next=30,this._getExternalVideoStream();case 30:c=e.sent,t=c.getVideoTracks()[0].clone();case 32:if(l={videoGoogleStartBitrate:1e3},!this._forceH264){e.next=39;break}if(s=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/h264"===e.mimeType.toLowerCase()}))){e.next=37;break}throw new Error("desired H264 codec+configuration is not supported");case 37:e.next=43;break;case 39:if(!this._forceVP9){e.next=43;break}if(s=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/vp9"===e.mimeType.toLowerCase()}))){e.next=43;break}throw new Error("desired VP9 codec+configuration is not supported");case 43:return this._useSimulcast&&(d=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video"===e.kind})),i=this._forceVP9&&s||"video/vp9"===d.mimeType.toLowerCase()?xe:ve),e.next=46,this._sendTransport.produce({track:t,encodings:i,codecOptions:l,codec:s});case 46:this._webcamProducer=e.sent,D.dispatch(B({id:this._webcamProducer.id,deviceLabel:a.label,type:this._getWebcamType(a),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1]})),this._webcamProducer.on("transportclose",(function(){u._webcamProducer=null})),this._webcamProducer.on("trackended",(function(){D.dispatch(he({type:"error",text:"Webcam disconnected!"})),u.disableWebcam().catch((function(){}))})),e.next=57;break;case 52:e.prev=52,e.t0=e.catch(12),ye.error("enableWebcam() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error enabling webcam: ".concat(e.t0)})),t&&t.stop();case 57:D.dispatch(J(!1));case 58:case"end":return e.stop()}}),e,this,[[12,52]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableWebcam",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("disableWebcam()"),this._webcamProducer){e.next=3;break}return e.abrupt("return");case 3:return this._webcamProducer.close(),D.dispatch(z(this._webcamProducer.id)),e.prev=5,e.next=8,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),D.dispatch(he({type:"error",text:"Error closing server-side webcam Producer: ".concat(e.t0)}));case 13:this._webcamProducer=null;case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"changeWebcam",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,o,c,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("changeWebcam()"),D.dispatch(J(!0)),e.prev=2,e.next=5,this._updateWebcams();case 5:if(t=Array.from(this._webcams.keys()),a=t.length,r=this._webcam.device?this._webcam.device.deviceId:void 0,(o=t.indexOf(r))<a-1?o++:o=0,this._webcam.device=this._webcams.get(t[o]),ye.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution="hd",this._webcam.device){e.next=15;break}throw new Error("no webcam devices");case 15:return this._webcamProducer.track.stop(),ye.debug("changeWebcam() | calling getUserMedia()"),e.next=19,navigator.mediaDevices.getUserMedia({video:Object(y.a)({deviceId:{exact:this._webcam.device.deviceId}},je[this._webcam.resolution])});case 19:return c=e.sent,i=c.getVideoTracks()[0],e.next=23,this._webcamProducer.replaceTrack({track:i});case 23:D.dispatch(Y(this._webcamProducer.id,i)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(2),ye.error("changeWebcam() | failed: %o",e.t0),D.dispatch(he({type:"error",text:"Could not change webcam: ".concat(e.t0)}));case 30:D.dispatch(J(!1));case 31:case"end":return e.stop()}}),e,this,[[2,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"changeWebcamResolution",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug("changeWebcamResolution()"),D.dispatch(J(!0)),e.prev=2,e.t0=this._webcam.resolution,e.next="qvga"===e.t0?6:"vga"===e.t0?8:"hd"===e.t0?10:12;break;case 6:return this._webcam.resolution="vga",e.abrupt("break",13);case 8:return this._webcam.resolution="hd",e.abrupt("break",13);case 10:return this._webcam.resolution="qvga",e.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return ye.debug("changeWebcamResolution() | calling getUserMedia()"),e.next=16,navigator.mediaDevices.getUserMedia({video:Object(y.a)({deviceId:{exact:this._webcam.device.deviceId}},je[this._webcam.resolution])});case 16:return t=e.sent,a=t.getVideoTracks()[0],e.next=20,this._webcamProducer.replaceTrack({track:a});case 20:D.dispatch(Y(this._webcamProducer.id,a)),e.next=27;break;case 23:e.prev=23,e.t1=e.catch(2),ye.error("changeWebcamResolution() | failed: %o",e.t1),D.dispatch(he({type:"error",text:"Could not change webcam resolution: ".concat(e.t1)}));case 27:D.dispatch(J(!1));case 28:case"end":return e.stop()}}),e,this,[[2,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableShare",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,o,c,i,s,l,d=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("enableShare()"),!this._shareProducer){e.next=5;break}return e.abrupt("return");case 5:if(!this._webcamProducer){e.next=8;break}return e.next=8,this.disableWebcam();case 8:if(this._mediasoupDevice.canProduce("video")){e.next=11;break}return ye.error("enableShare() | cannot produce video"),e.abrupt("return");case 11:return D.dispatch(X(!0)),e.prev=12,ye.debug("enableShare() | calling getUserMedia()"),e.next=16,navigator.mediaDevices.getDisplayMedia({audio:!1,video:{displaySurface:"monitor",logicalSurface:!0,cursor:!0,width:{max:1920},height:{max:1080},frameRate:{max:30}}});case 16:if(a=e.sent){e.next=20;break}return D.dispatch(X(!0)),e.abrupt("return");case 20:if(t=a.getVideoTracks()[0],c={videoGoogleStartBitrate:1e3},!this._forceH264){e.next=28;break}if(o=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/h264"===e.mimeType.toLowerCase()}))){e.next=26;break}throw new Error("desired H264 codec+configuration is not supported");case 26:e.next=32;break;case 28:if(!this._forceVP9){e.next=32;break}if(o=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/vp9"===e.mimeType.toLowerCase()}))){e.next=32;break}throw new Error("desired VP9 codec+configuration is not supported");case 32:return this._useSharingSimulcast&&(i=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video"===e.kind})),r=this._forceVP9&&o||"video/vp9"===i.mimeType.toLowerCase()?Oe:ge.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{dtx:!0})}))),e.next=35,this._sendTransport.produce({track:t,encodings:r,codecOptions:c,codec:o,appData:{share:!0}});case 35:return this._shareProducer=e.sent,D.dispatch(B({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1]})),s=D.getState(),l=s.me,e.prev=38,e.next=41,this._protoo.request("sharingMyScreen",{shareScreenId:l.id});case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(38),ye.error("sharingMyScreen() | failed: %o",e.t0);case 46:D.dispatch(ue("screen",l.id)),this._shareProducer.on("transportclose",(function(){d._shareProducer=null})),this._shareProducer.on("trackended",(function(){D.dispatch(he({type:"error",text:"Share disconnected!"})),d.disableShare().catch((function(){}))})),e.next=56;break;case 51:e.prev=51,e.t1=e.catch(12),ye.error("enableShare() | failed:%o",e.t1),"NotAllowedError"!==e.t1.name&&D.dispatch(he({type:"error",text:"Error sharing: ".concat(e.t1)})),t&&t.stop();case 56:D.dispatch(X(!1));case 57:case"end":return e.stop()}}),e,this,[[12,51],[38,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableShare",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("disableShare()"),this._shareProducer){e.next=3;break}return e.abrupt("return");case 3:return this._shareProducer.close(),D.dispatch(z(this._shareProducer.id)),e.prev=5,e.next=8,this._protoo.request("sharingMyScreen",{shareScreenId:null});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),ye.error("sharingMyScreen() | failed: %o",e.t0);case 13:return D.dispatch(ue("grid",null)),e.prev=14,e.next=17,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),D.dispatch(he({type:"error",text:"Error closing server-side share Producer: ".concat(e.t1)}));case 22:this._shareProducer=null;case 23:case"end":return e.stop()}}),e,this,[[5,10],[14,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableAudioOnly",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug("enableAudioOnly()"),D.dispatch(H(!0)),this.disableWebcam(),t=Object(O.a)(this._consumers.values()),e.prev=4,t.s();case 6:if((a=t.n()).done){e.next=13;break}if("video"===(r=a.value).kind){e.next=10;break}return e.abrupt("continue",11);case 10:this._pauseConsumer(r);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:D.dispatch(F(!0)),D.dispatch(H(!1));case 23:case"end":return e.stop()}}),e,this,[[4,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableAudioOnly",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug("disableAudioOnly()"),D.dispatch(H(!0)),!this._webcamProducer&&this._produce&&(T()||{}).webcamEnabled&&this.enableWebcam(),t=Object(O.a)(this._consumers.values()),e.prev=4,t.s();case 6:if((a=t.n()).done){e.next=13;break}if("video"===(r=a.value).kind){e.next=10;break}return e.abrupt("continue",11);case 10:this._resumeConsumer(r);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:D.dispatch(F(!1)),D.dispatch(H(!1));case 23:case"end":return e.stop()}}),e,this,[[4,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"muteAudio",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug("muteAudio()"),D.dispatch(W(!0));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"unmuteAudio",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye.debug("unmuteAudio()"),D.dispatch(W(!1));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("restartIce()"),D.dispatch(U(!0)),e.prev=2,!this._sendTransport){e.next=9;break}return e.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return t=e.sent,e.next=9,this._sendTransport.restartIce({iceParameters:t});case 9:if(!this._recvTransport){e.next=15;break}return e.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return a=e.sent,e.next=15,this._recvTransport.restartIce({iceParameters:a});case 15:D.dispatch(he({text:"ICE restarted"})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),ye.error("restartIce() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"ICE restart failed: ".concat(e.t0)}));case 22:D.dispatch(U(!1));case 23:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"setMaxSendingSpatialLayer",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",t),e.prev=1,!this._webcamProducer){e.next=7;break}return e.next=5,this._webcamProducer.setMaxSpatialLayer(t);case 5:e.next=10;break;case 7:if(!this._shareProducer){e.next=10;break}return e.next=10,this._shareProducer.setMaxSpatialLayer(t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),ye.error("setMaxSendingSpatialLayer() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error setting max sending video spatial layer: ".concat(e.t0)}));case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setConsumerPreferredLayers",value:function(){var e=Object(o.a)(n.a.mark((function e(t,a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",t,a,r),e.prev=1,e.next=4,this._protoo.request("setConsumerPreferredLayers",{consumerId:t,spatialLayer:a,temporalLayer:r});case 4:D.dispatch(oe(t,a,r)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ye.error("setConsumerPreferredLayers() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error setting Consumer preferred layers: ".concat(e.t0)}));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"setConsumerPriority",value:function(){var e=Object(o.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("setConsumerPriority() [consumerId:%s, priority:%d]",t,a),e.prev=1,e.next=4,this._protoo.request("setConsumerPriority",{consumerId:t,priority:a});case 4:D.dispatch(ce(t,a)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ye.error("setConsumerPriority() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error setting Consumer priority: ".concat(e.t0)}));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"requestConsumerKeyFrame",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("requestConsumerKeyFrame() [consumerId:%s]",t),e.prev=1,e.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:t});case 4:D.dispatch(he({text:"Keyframe requested for video consumer"})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ye.error("requestConsumerKeyFrame() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error requesting key frame for Consumer: ".concat(e.t0)}));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enableChatDataProducer",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("enableChatDataProducer()"),this._useDataChannel){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=e.sent,D.dispatch(G({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",(function(){t._chatDataProducer=null})),this._chatDataProducer.on("open",(function(){ye.debug('chat DataProducer "open" event')})),this._chatDataProducer.on("close",(function(){ye.error('chat DataProducer "close" event'),t._chatDataProducer=null,D.dispatch(he({type:"error",text:"Chat DataProducer closed"}))})),this._chatDataProducer.on("error",(function(e){ye.error('chat DataProducer "error" event:%o',e),D.dispatch(he({type:"error",text:"Chat DataProducer error: ".concat(e)}))})),this._chatDataProducer.on("bufferedamountlow",(function(){ye.debug('chat DataProducer "bufferedamountlow" event')})),e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(3),ye.error("enableChatDataProducer() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error enabling chat DataProducer: ".concat(e.t0)})),e.t0;case 20:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableBotDataProducer",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("enableBotDataProducer()"),this._useDataChannel){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=e.sent,D.dispatch(G({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",(function(){t._botDataProducer=null})),this._botDataProducer.on("open",(function(){ye.debug('bot DataProducer "open" event')})),this._botDataProducer.on("close",(function(){ye.error('bot DataProducer "close" event'),t._botDataProducer=null,D.dispatch(he({type:"error",text:"Bot DataProducer closed"}))})),this._botDataProducer.on("error",(function(e){ye.error('bot DataProducer "error" event:%o',e),D.dispatch(he({type:"error",text:"Bot DataProducer error: ".concat(e)}))})),this._botDataProducer.on("bufferedamountlow",(function(){ye.debug('bot DataProducer "bufferedamountlow" event')})),e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(3),ye.error("enableBotDataProducer() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error enabling bot DataProducer: ".concat(e.t0)})),e.t0;case 20:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendChatMessage",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug('sendChatMessage() [text:"%s]',t),this._chatDataProducer){e.next=4;break}return D.dispatch(he({type:"error",text:"No chat DataProducer"})),e.abrupt("return");case 4:try{this._chatDataProducer.send(t)}catch(a){ye.error("chat DataProducer.send() failed:%o",a),D.dispatch(he({type:"error",text:"chat DataProducer.send() failed: ".concat(a)}))}case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendBotMessage",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug('sendBotMessage() [text:"%s]',t),this._botDataProducer){e.next=4;break}return D.dispatch(he({type:"error",text:"No bot DataProducer"})),e.abrupt("return");case 4:try{this._botDataProducer.send(t)}catch(a){ye.error("bot DataProducer.send() failed:%o",a),D.dispatch(he({type:"error",text:"bot DataProducer.send() failed: ".concat(a)}))}case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeDisplayName",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug('changeDisplayName() [displayName:"%s"]',t),C({displayName:t}),e.prev=2,e.next=5,this._protoo.request("changeDisplayName",{displayName:t});case 5:this._displayName=t,D.dispatch(q(t)),D.dispatch(he({text:"Display name changed"})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),ye.error("changeDisplayName() | failed: %o",e.t0),D.dispatch(he({type:"error",text:"Could not change display name: ".concat(e.t0)})),D.dispatch(q());case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSendTransportRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getSendTransportRemoteStats()"),this._sendTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecvTransportRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getRecvTransportRemoteStats()"),this._recvTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getAudioRemoteStats()"),this._micProducer){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._protoo.request("getProducerStats",{producerId:this._micProducer.id}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVideoRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getVideoRemoteStats()"),t=this._webcamProducer||this._shareProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getProducerStats",{producerId:t.id}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConsumerRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getConsumerRemoteStats()"),this._consumers.get(t)){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getConsumerStats",{consumerId:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChatDataProducerRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getChatDataProducerRemoteStats()"),t=this._chatDataProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:t.id}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBotDataProducerRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getBotDataProducerRemoteStats()"),t=this._botDataProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:t.id}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDataConsumerRemoteStats",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(t)){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSendTransportLocalStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getSendTransportLocalStats()"),this._sendTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._sendTransport.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecvTransportLocalStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getRecvTransportLocalStats()"),this._recvTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._recvTransport.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioLocalStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getAudioLocalStats()"),this._micProducer){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._micProducer.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVideoLocalStats",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.debug("getVideoLocalStats()"),t=this._webcamProducer||this._shareProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",t.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConsumerLocalStats",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._consumers.get(t)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",a.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyNetworkThrottle",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var a,r,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uplink,r=t.downlink,o=t.rtt,c=t.secret,ye.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",a,r,o),e.prev=2,e.next=5,this._protoo.request("applyNetworkThrottle",{uplink:a,downlink:r,rtt:o,secret:c});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),ye.error("applyNetworkThrottle() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error applying network throttle: ".concat(e.t0)}));case 11:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetNetworkThrottle",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var a,r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.silent,r=void 0!==a&&a,o=t.secret,ye.debug("resetNetworkThrottle()"),e.prev=2,e.next=5,this._protoo.request("resetNetworkThrottle",{secret:o});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r||(ye.error("resetNetworkThrottle() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error resetting network throttle: ".concat(e.t0)})));case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_joinRoom",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,c,i,s,l,d,u,m,p,b,h,j,f,v,x,g,N,k,w,_,P,E=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("_joinRoom()"),e.prev=1,this._mediasoupDevice=new S.Device({handlerName:this._handlerName}),e.next=5,this._protoo.request("getRouterRtpCapabilities");case 5:return t=e.sent,e.next=8,this._mediasoupDevice.load({routerRtpCapabilities:t});case 8:return e.next=10,navigator.mediaDevices.getUserMedia({audio:!0});case 10:if(a=e.sent,(r=a.getAudioTracks()[0]).enabled=!1,setTimeout((function(){return r.stop()}),12e4),!this._produce){e.next=23;break}return e.next=17,this._protoo.request("createWebRtcTransport",{forceTcp:this._forceTcp,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 17:c=e.sent,i=c.id,s=c.iceParameters,l=c.iceCandidates,d=c.dtlsParameters,u=c.sctpParameters,this._sendTransport=this._mediasoupDevice.createSendTransport({id:i,iceParameters:s,iceCandidates:l,dtlsParameters:d,sctpParameters:u,iceServers:[],proprietaryConstraints:fe}),this._sendTransport.on("connect",(function(e,t,a){var r=e.dtlsParameters;E._protoo.request("connectWebRtcTransport",{transportId:E._sendTransport.id,dtlsParameters:r}).then(t).catch(a)})),this._sendTransport.on("produce",function(){var e=Object(o.a)(n.a.mark((function e(t,a,r){var o,c,i,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.kind,c=t.rtpParameters,i=t.appData,e.prev=1,e.next=4,E._protoo.request("produce",{transportId:E._sendTransport.id,kind:o,rtpParameters:c,appData:i});case 4:s=e.sent,l=s.id,a({id:l}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var e=Object(o.a)(n.a.mark((function e(t,a,r){var o,c,i,s,l,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.sctpStreamParameters,c=t.label,i=t.protocol,s=t.appData,ye.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',o,s),e.prev=2,e.next=5,E._protoo.request("produceData",{transportId:E._sendTransport.id,sctpStreamParameters:o,label:c,protocol:i,appData:s});case 5:l=e.sent,d=l.id,a({id:d}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,r){return e.apply(this,arguments)}}());case 23:if(!this._consume){e.next=30;break}return e.next=26,this._protoo.request("createWebRtcTransport",{forceTcp:this._forceTcp,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 26:m=e.sent,p=m.id,b=m.iceParameters,h=m.iceCandidates,j=m.dtlsParameters,f=m.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:p,iceParameters:b,iceCandidates:h,dtlsParameters:j,sctpParameters:f,iceServers:[]}),this._recvTransport.on("connect",(function(e,t,a){var r=e.dtlsParameters;E._protoo.request("connectWebRtcTransport",{transportId:E._recvTransport.id,dtlsParameters:r}).then(t).catch(a)}));case 30:return e.next=32,this._protoo.request("join",{displayName:this._displayName,device:this._device,rtpCapabilities:this._consume?this._mediasoupDevice.rtpCapabilities:void 0,sctpCapabilities:this._useDataChannel&&this._consume?this._mediasoupDevice.sctpCapabilities:void 0});case 32:v=e.sent,x=v.peers,D.dispatch(A("connected")),D.dispatch(pe(!1)),D.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),D.dispatch(he({text:"You are in the room!",timeout:3e3})),g=Object(O.a)(x);try{for(g.s();!(N=g.n()).done;)k=N.value,D.dispatch(Q(Object(y.a)(Object(y.a)({},k),{},{consumers:[],dataConsumers:[]})))}catch(R){g.e(R)}finally{g.f()}this._produce&&(D.dispatch({type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:(C={canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")}).canSendMic,canSendWebcam:C.canSendWebcam}}),this.enableMic(),(!(w=T())||w.webcamEnabled||this._externalVideo)&&this.enableWebcam(),this._sendTransport.on("connectionstatechange",(function(e){"connected"===e&&(E.enableChatDataProducer(),E.enableBotDataProducer())}))),window.SHOW_INFO&&(_=D.getState(),P=_.me,D.dispatch(V(P.id))),e.next=49;break;case 44:e.prev=44,e.t0=e.catch(1),ye.error("_joinRoom() failed:%o",e.t0),D.dispatch(he({type:"error",text:"Could not join the room: ".concat(e.t0)})),this.close();case 49:case"end":return e.stop()}var C}),e,this,[[1,44]])})));return function(){return e.apply(this,arguments)}}()},{key:"_updateWebcams",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a,r,o,c,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.debug("_updateWebcams()"),this._webcams=new Map,ye.debug("_updateWebcams() | calling enumerateDevices()"),e.next=5,navigator.mediaDevices.enumerateDevices();case 5:t=e.sent,a=Object(O.a)(t),e.prev=7,a.s();case 9:if((r=a.n()).done){e.next=16;break}if("videoinput"===(o=r.value).kind){e.next=13;break}return e.abrupt("continue",14);case 13:this._webcams.set(o.deviceId,o);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:c=Array.from(this._webcams.values()),i=c.length,s=this._webcam.device?this._webcam.device.deviceId:void 0,ye.debug("_updateWebcams() [webcams:%o]",c),0===i?this._webcam.device=null:this._webcams.has(s)||(this._webcam.device=c[0]),D.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1});case 30:case"end":return e.stop()}}),e,this,[[7,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getWebcamType",value:function(e){return/(back|rear)/i.test(e.label)?(ye.debug("_getWebcamType() | it seems to be a back camera"),"back"):(ye.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.paused){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._protoo.request("pauseConsumer",{consumerId:t.id});case 5:t.pause(),D.dispatch(ae(t.id,"local")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),ye.error("_pauseConsumer() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error pausing Consumer: ".concat(e.t0)}));case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_resumeConsumer",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.paused){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._protoo.request("resumeConsumer",{consumerId:t.id});case 5:t.resume(),D.dispatch(re(t.id,"local")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),ye.error("_resumeConsumer() | failed:%o",e.t0),D.dispatch(he({type:"error",text:"Error resuming Consumer: ".concat(e.t0)}));case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getExternalVideoStream",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._externalVideoStream){e.next=2;break}return e.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){e.next=5;break}return e.next=5,new Promise((function(e){return t._externalVideo.addEventListener("canplay",e)}));case 5:if(!this._externalVideo.captureStream){e.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),e.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){e.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),e.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return e.abrupt("return",this._externalVideoStream);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"meetingChat",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("meetingChat",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye.error("meetingChat() | failed: %o",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"controlOverAudioVideoByHost",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("controlOverAudioVideoByHost",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye.error("meetingChat() | failed: %o",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"controlOverAudioVideoByHostAll",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("controlOverAudioVideoByHostAll",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye.error("meetingChat() | failed: %o",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"endCallForAll",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("endCallForAll",{});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye.error("meetingChat() | failed: %o",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"recordingStatus",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("recordingStatus",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye.error("meetingChat() | failed: %o",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ke={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_URL":var a=t.payload.url;return Object(y.a)(Object(y.a)({},e),{},{url:a});case"SET_ROOM_STATE":var r=t.payload.state;return"connected"===r?Object(y.a)(Object(y.a)({},e),{},{state:r}):Object(y.a)(Object(y.a)({},e),{},{state:r,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var n=t.payload.peerId;return Object(y.a)(Object(y.a)({},e),{},{activeSpeakerId:n});case"SET_ROOM_STATS_PEER_ID":var o=t.payload.peerId;return e.statsPeerId===o?Object(y.a)(Object(y.a)({},e),{},{statsPeerId:null}):Object(y.a)(Object(y.a)({},e),{},{statsPeerId:o});case"SET_FACE_DETECTION":var c=t.payload;return Object(y.a)(Object(y.a)({},e),{},{faceDetection:c});case"REMOVE_PEER":var i=t.payload.peerId,s=Object(y.a)({},e);return i&&i===e.activeSpeakerId&&(s.activeSpeakerId=null),i&&i===e.statsPeerId&&(s.statsPeerId=null),s;default:return e}},we={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?Object(y.a)(Object(y.a)({},e),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):e;case"SET_ME":var r=t.payload,n=r.peerId,o=r.displayName,c=r.displayNameSet,i=r.device;return Object(y.a)(Object(y.a)({},e),{},{id:n,displayName:o,displayNameSet:c,device:i});case"SET_MEDIA_CAPABILITIES":var s=t.payload,l=s.canSendMic,d=s.canSendWebcam;return Object(y.a)(Object(y.a)({},e),{},{canSendMic:l,canSendWebcam:d});case"SET_CAN_CHANGE_WEBCAM":var u=t.payload;return Object(y.a)(Object(y.a)({},e),{},{canChangeWebcam:u});case"SET_WEBCAM_IN_PROGRESS":var m=t.payload.flag;return Object(y.a)(Object(y.a)({},e),{},{webcamInProgress:m});case"SET_SHARE_IN_PROGRESS":var p=t.payload.flag;return Object(y.a)(Object(y.a)({},e),{},{shareInProgress:p});case"SET_DISPLAY_NAME":var b=t.payload.displayName;return b||(b=e.displayName),Object(y.a)(Object(y.a)({},e),{},{displayName:b,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var h=t.payload.enabled;return Object(y.a)(Object(y.a)({},e),{},{audioOnly:h});case"SET_AUDIO_ONLY_IN_PROGRESS":var j=t.payload.flag;return Object(y.a)(Object(y.a)({},e),{},{audioOnlyInProgress:j});case"SET_AUDIO_MUTED_STATE":var f=t.payload.enabled;return Object(y.a)(Object(y.a)({},e),{},{audioMuted:f});case"SET_RESTART_ICE_IN_PROGRESS":var v=t.payload.flag;return Object(y.a)(Object(y.a)({},e),{},{restartIceInProgress:v});default:return e}},Pe=a(17),Ee={},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?{}:e;case"ADD_PRODUCER":var r=t.payload.producer;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r.id,r));case"REMOVE_PRODUCER":var n=t.payload.producerId,o=Object(y.a)({},e);return delete o[n],o;case"SET_PRODUCER_PAUSED":var c=t.payload.producerId,i=e[c],s=Object(y.a)(Object(y.a)({},i),{},{paused:!0});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},c,s));case"SET_PRODUCER_RESUMED":var l=t.payload.producerId,d=e[l],u=Object(y.a)(Object(y.a)({},d),{},{paused:!1});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},l,u));case"SET_PRODUCER_TRACK":var m=t.payload,p=m.producerId,b=m.track,h=e[p],j=Object(y.a)(Object(y.a)({},h),{},{track:b});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},p,j));case"SET_PRODUCER_SCORE":var f=t.payload,v=f.producerId,x=f.score,g=e[v];if(!g)return e;var O=Object(y.a)(Object(y.a)({},g),{},{score:x});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},v,O));default:return e}},Te={},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?{}:e;case"ADD_DATA_PRODUCER":var r=t.payload.dataProducer;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r.id,r));case"REMOVE_DATA_PRODUCER":var n=t.payload.dataProducerId,o=Object(y.a)({},e);return delete o[n],o;default:return e}},De=a(30),Me={},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?{}:e;case"ADD_PEER":var r=t.payload.peer;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r.id,r));case"REMOVE_PEER":var n=t.payload.peerId,o=Object(y.a)({},e);return delete o[n],o;case"SET_PEER_DISPLAY_NAME":var c=t.payload,i=c.displayName,s=c.peerId,l=e[s];if(!l)throw new Error("no Peer found");var d=Object(y.a)(Object(y.a)({},l),{},{displayName:i});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},d.id,d));case"ADD_CONSUMER":var u=t.payload,m=u.consumer,p=u.peerId,b=e[p];if(!b)throw new Error("no Peer found for new Consumer");var h=[].concat(Object(De.a)(b.consumers),[m.id]),j=Object(y.a)(Object(y.a)({},b),{},{consumers:h});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},j.id,j));case"REMOVE_CONSUMER":var f=t.payload,v=f.consumerId,x=f.peerId,g=e[x];if(!g)return e;var O=g.consumers.indexOf(v);if(-1===O)throw new Error("Consumer not found");var N=g.consumers.slice();N.splice(O,1);var k=Object(y.a)(Object(y.a)({},g),{},{consumers:N});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},k.id,k));case"ADD_DATA_CONSUMER":var S=t.payload,w=S.dataConsumer,_=S.peerId;if(!_)return e;var P=e[_];if(!P)throw new Error("no Peer found for new DataConsumer");var E=[].concat(Object(De.a)(P.dataConsumers),[w.id]),C=Object(y.a)(Object(y.a)({},P),{},{dataConsumers:E});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},C.id,C));case"REMOVE_DATA_CONSUMER":var T=t.payload,R=T.dataConsumerId,D=T.peerId;if(!D)return e;var M=e[D];if(!M)return e;var I=M.dataConsumers.indexOf(R);if(-1===I)throw new Error("DataConsumer not found");var A=M.dataConsumers.slice();A.splice(I,1);var L=Object(y.a)(Object(y.a)({},M),{},{dataConsumers:A});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},L.id,L));default:return e}},Ae={},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?{}:e;case"ADD_CONSUMER":var r=t.payload.consumer;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r.id,r));case"REMOVE_CONSUMER":var n=t.payload.consumerId,o=Object(y.a)({},e);return delete o[n],o;case"SET_CONSUMER_PAUSED":var c,i=t.payload,s=i.consumerId,l=i.originator,d=e[s];return c="local"===l?Object(y.a)(Object(y.a)({},d),{},{locallyPaused:!0}):Object(y.a)(Object(y.a)({},d),{},{remotelyPaused:!0}),Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},s,c));case"SET_CONSUMER_RESUMED":var u,m=t.payload,p=m.consumerId,b=m.originator,h=e[p];return u="local"===b?Object(y.a)(Object(y.a)({},h),{},{locallyPaused:!1}):Object(y.a)(Object(y.a)({},h),{},{remotelyPaused:!1}),Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},p,u));case"SET_CONSUMER_CURRENT_LAYERS":var j=t.payload,f=j.consumerId,v=j.spatialLayer,x=j.temporalLayer,g=e[f],O=Object(y.a)(Object(y.a)({},g),{},{currentSpatialLayer:v,currentTemporalLayer:x});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},f,O));case"SET_CONSUMER_PREFERRED_LAYERS":var N=t.payload,k=N.consumerId,S=N.spatialLayer,w=N.temporalLayer,_=e[k],P=Object(y.a)(Object(y.a)({},_),{},{preferredSpatialLayer:S,preferredTemporalLayer:w});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},k,P));case"SET_CONSUMER_PRIORITY":var E=t.payload,C=E.consumerId,T=E.priority,R=e[C],D=Object(y.a)(Object(y.a)({},R),{},{priority:T});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},C,D));case"SET_CONSUMER_TRACK":var M=t.payload,I=M.consumerId,A=M.track,L=e[I],V=Object(y.a)(Object(y.a)({},L),{},{track:A});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},I,V));case"SET_CONSUMER_SCORE":var q=t.payload,F=q.consumerId,H=q.score,W=e[F];if(!W)return e;var U=Object(y.a)(Object(y.a)({},W),{},{score:H});return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},F,U));default:return e}},Ve={},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var a=t.payload.state;return"closed"===a?{}:e;case"ADD_DATA_CONSUMER":var r=t.payload.dataConsumer;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r.id,r));case"REMOVE_DATA_CONSUMER":var n=t.payload.dataConsumerId,o=Object(y.a)({},e);return delete o[n],o;default:return e}},Fe=[],He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIFICATION":var a=t.payload.notification;return[].concat(Object(De.a)(e),[a]);case"REMOVE_NOTIFICATION":var r=t.payload.notificationId;return e.filter((function(e){return e.id!==r}));case"REMOVE_ALL_NOTIFICATIONS":return[];default:return e}},We={mode:"grid",screenId:null},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISPLAY_MODE":var a=t.payload,r=a.mode,n=a.screenId;return Object(y.a)(Object(y.a)({},e),{},{mode:r,screenId:n});default:return e}},Be=[],ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":var a=t.payload.message;return[].concat(Object(De.a)(e),[a]);case"RESET_MESSAGE":return[];default:return e}},Ye={mode:"list"},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RIGHT_SIDE_MODE":var a=t.payload.mode;return Object(y.a)(Object(y.a)({},e),{},{mode:a});default:return e}},Ge={visible:!0},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADER":var a=t.payload.visible;return Object(y.a)(Object(y.a)({},e),{},{visible:a});default:return e}},Xe={message:""},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RECORDING_MESSAGE":var a=t.payload.message;return Object(y.a)(Object(y.a)({},e),{},{message:a});default:return e}},Ze={start:"inline",play:"none",pause:"none",stop:"none"},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RECORDING_OPERATION":var a=t.payload,r=a.key,n=a.value;return Object(y.a)(Object(y.a)({},e),{},Object(Pe.a)({},r,n));default:return e}},et=Object(p.c)({room:Se,me:_e,producers:Ce,dataProducers:Re,peers:Ie,consumers:Le,dataConsumers:qe,notifications:He,displayMode:Ue,textMessaging:ze,rightSideMode:Ke,meetingLoader:Je,recordingMessage:Qe,recordingBarUtil:$e}),tt=a(45),at=a(36),rt=a(13),nt=a.p+"static/media/logo.a97fb749.png",ot=a(11),ct=a(52),it=a(192).a.initializeApp({apiKey:"AIzaSyAn0yBDVbWi13B1qYgqPMlBa4r1dd-G930",authDomain:"gentle-presence-298508.firebaseapp.com",projectId:"gentle-presence-298508",storageBucket:"gentle-presence-298508.appspot.com",messagingSenderId:"281044823578",appId:"1:281044823578:web:d06f283abe038338a1aba3",measurementId:"G-9H0KLJLG8H"}).firestore(),st=function(){var e=Object(at.f)(),t=d.a.useState({}),a=Object(rt.a)(t,2),r=a[0],n=a[1],o=d.a.useState(null),i=Object(rt.a)(o,2),s=i[0],l=i[1],u=d.a.useState(null),m=Object(rt.a)(u,2),p=m[0],b=m[1],h=d.a.useState("password"),j=Object(rt.a)(h,2),f=j[0],v=j[1];d.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("user"));n(e);var t=e.id;l(t),b("https://meeting.unlockworld.net/room/"+t)}),[]);var x=function(e){document.getElementById(e).style.display="none"===document.getElementById(e).style.display?"block":"none"};return Object(c.jsxs)("div",{className:"container-full bg-white",children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Home"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsxs)("nav",{className:" navbar navbar-expand-lg navbar-light bg-white overright-nabbar  border-bottom",children:[Object(c.jsx)("a",{className:"navbar-brand",href:"",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("img",{src:nt,style:{height:44}})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(c.jsxs)("ul",{className:"nav navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item c-text ",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){e.push("/join")},children:"Join a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){var t=I()({length:8}).toLowerCase();it.collection("meeting").add({meetingId:t,userId:r.id,created:new Date,user:r}).then((function(a){e.push("/room/"+t)})).catch((function(e){return console.error("Error adding document: ",e)}))},children:"Host a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("button",{className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",style:{width:"100%",padding:"1px 32px"},onClick:function(){localStorage.removeItem("user"),e.push("/signin")},children:"Logout"})})]})})]}),Object(c.jsx)("a",{className:"d-sm-block d-md-none ",style:{position:"absolute",zIndex:999999,WebkitFontSmoothing:"subpixel-antialiased",backgroundColor:"#f7023e",borderRadius:"49px 0 0 49px",padding:"1px   9px",color:"#fff",top:"18%",right:0},children:Object(c.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("nav",{id:"sidebar",className:"col-md-2 d-none d-md-block bg-common sidebar mobile-absolute",children:Object(c.jsx)("div",{className:"sidebar-sticky",children:Object(c.jsxs)("ul",{className:"nav flex-column",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link active",href:"#",onClick:function(t){t.preventDefault(),e.push("/")},children:" Profile"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link",href:"#",onClick:function(t){t.preventDefault(),e.push("/schedule")},children:"Meetings"})})]})})}),Object(c.jsxs)("main",{role:"main",className:"col-md-8 col-lg-9 px-4 pt-5",children:[Object(c.jsx)("div",{className:"form-horizontal",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-sm-5 col-md-3 control-label my-profile text-center",children:[Object(c.jsx)("figure",{className:"figure",children:Object(c.jsx)("img",{src:r.photo,className:"profile",alt:"Figure."})}),Object(c.jsx)("p",{children:"\xa0\xa0\xa0"})]}),Object(c.jsxs)("div",{className:"col-sm-7 col-md-7 control-label my-profile",children:[Object(c.jsx)("h4",{children:r.name}),Object(c.jsx)("ul",{})]})]})}),Object(c.jsxs)("div",{className:"profile-info",children:[Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Personal Meeting ID:"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:s}),Object(c.jsx)("li",{children:p}),Object(c.jsx)("li",{children:"Use this ID for instant meetings"}),Object(c.jsx)("li",{})]}),Object(c.jsxs)("form",{id:"profile-sec1",className:"profilrfrom",action:"#",encType:"multipart/form-data",style:{display:"none"},children:[Object(c.jsxs)("div",{id:"profile-detail-el",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("p",{className:"form-control-static detail-label",children:"Full Name"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Full Name"}),Object(c.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]})]}),Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("p",{className:"form-control-static detail-label",children:"Display Name"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Display Name"}),Object(c.jsx)("div",{className:"invalid-feedback",children:" Please provide a valid city."})]})]})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("p",{className:"form-control-static detail-label",children:"Job Title"})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Job Title"})})]}),Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("p",{className:"form-control-static detail-label",children:"Company"})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Company"})})]})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("p",{className:"form-control-static detail-label",children:"Location"})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Location"})})]})})]}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec1")},className:"btn shado-baground-textS btn-sm",children:"Savs change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec1")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]}),Object(c.jsx)("a",{className:"edit position-absolute c-text",style:{display:"none"},onClick:function(){return x("profile-sec1")},children:"Edit"})]})]})}),Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Sign-In Email:"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:r.email})}),Object(c.jsxs)("div",{className:"col-sm-12",children:["License Type:",Object(c.jsx)(ot.b,{condition:"Google"===r.type,children:Object(c.jsx)("a",{type:"button",children:Object(c.jsx)("i",{className:"fa fa-google"})})}),Object(c.jsx)(ot.b,{condition:"Facebook"===r.type,children:Object(c.jsx)("a",{type:"button",children:Object(c.jsx)("i",{className:"fa fa-facebook"})})}),Object(c.jsx)(ot.b,{condition:"Normal"===r.type,children:"Normal"})]}),Object(c.jsxs)("form",{className:"profilrfrom",id:"profile-sec2",action:"#",encType:"text/plain",style:{display:"none"},children:[Object(c.jsx)("div",{className:"form-group",style:{maxWidth:330},children:Object(c.jsxs)("div",{className:"col-sm-12",children:[Object(c.jsx)("label",{htmlFor:"newEmail",children:"Please enter a new email address"}),Object(c.jsx)("input",{id:"newEmail",name:"newEmail",className:"form-control",maxLength:64,placeholder:"Please enter a new email address"})]})}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec2")},className:"btn shado-baground-textS btn-sm",children:"Save change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec2")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]}),Object(c.jsx)("a",{className:"edit position-absolute c-text",style:{display:"none"},onClick:function(){return x("profile-sec2")},children:"Edit"})]})]})}),Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3",children:"License Type"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsxs)("div",{className:"form-control-static",children:["Basic ",Object(c.jsx)("a",{"data-toggle":"collapse",href:"#multiCollapseExample1",role:"button","aria-expanded":"false","aria-controls":"multiCollapseExample1",children:Object(c.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})})," ",Object(c.jsx)("a",{href:"#billing",children:"Upgrade"})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsxs)("div",{className:"collapse multi-collapse",id:"multiCollapseExample1",children:["Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.",Object(c.jsx)("br",{})]})})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3",children:Object(c.jsx)("b",{children:"Meeting"})}),Object(c.jsxs)("div",{className:"col-sm-9",children:[Object(c.jsx)("span",{children:"100 participants"}),Object(c.jsxs)("a",{className:"help learn-more-button","data-learn-more":"more11",children:[Object(c.jsx)("span",{children:" Learn More"}),Object(c.jsx)("i",{className:"glyphicon glyphicon-question-sign"})]}),"\xa0"]})]})]})]})}),Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Language:"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:"English"})}),Object(c.jsxs)("form",{id:"profile-sec3",className:"profilrfrom",action:"#",encType:"text/plain",style:{display:"none"},children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsxs)("div",{className:"form-group",style:{maxWidth:330},children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Select Language"}),Object(c.jsxs)("select",{className:"form-control",id:"exampleFormControlSelect1",children:[Object(c.jsx)("option",{children:"1"}),Object(c.jsx)("option",{children:"2"}),Object(c.jsx)("option",{children:"3"}),Object(c.jsx)("option",{children:"4"}),Object(c.jsx)("option",{children:"5"})]})]})}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec3")},className:"btn shado-baground-textS btn-sm",children:"Savs change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec3")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]})]})]})}),Object(c.jsxs)("div",{className:"col-12 border-top p-2",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Date and Time"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("div",{className:"col-sm-2",children:Object(c.jsx)("b",{children:"Time Zone"})}),Object(c.jsx)("div",{className:"col-sm-10",children:Object(c.jsx)("span",{className:"timezone-label",children:"(GMT+6:00) Astana, Dhaka"})})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("div",{className:"col-sm-2",children:Object(c.jsx)("b",{children:"Date Format"})}),Object(c.jsx)("div",{className:"col-sm-3",children:Object(c.jsx)("span",{className:"dateFormat-label",children:"dd/mm/yyyy"})}),Object(c.jsxs)("div",{className:"col-sm-7",children:[Object(c.jsx)("span",{style:{color:"rgb(116, 116, 135)"},children:"Example:"})," ",Object(c.jsx)("span",{className:"dateExample-label",style:{paddingLeft:2,color:"rgb(116, 116, 135)"},children:"15/02/2011"})]}),Object(c.jsx)("div",{className:"col-sm-2",children:Object(c.jsx)("b",{children:"Time Format"})}),Object(c.jsx)("div",{className:"col-sm-10",children:Object(c.jsx)("span",{children:Object(c.jsxs)("label",{id:"timeFormatLabel",children:[Object(c.jsx)("i",{className:"status-icon",style:{marginLeft:0}}),Object(c.jsx)("span",{style:{color:"rgb(116, 116, 135)"},children:"Use 24-hour time"})]})})})]})]}),Object(c.jsxs)("form",{className:"profilrfrom",id:"profile-sec4",vaction:"#",encType:"text/plain",style:{display:"none"},children:[Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsxs)("div",{className:"form-group",style:{maxWidth:330},children:[Object(c.jsx)("label",{htmlFor:"exampleFormControlSelect1",children:"Time Zone"}),Object(c.jsxs)("select",{className:"form-control",id:"exampleFormControlSelect1",children:[Object(c.jsx)("option",{children:"1"}),Object(c.jsx)("option",{children:"2"}),Object(c.jsx)("option",{children:"3"}),Object(c.jsx)("option",{children:"4"}),Object(c.jsx)("option",{children:"5"})]})]}),Object(c.jsxs)("div",{className:"form-group",style:{maxWidth:330},children:[Object(c.jsx)("label",{htmlFor:"exampleFormControlSelect1",children:"Date Format"}),Object(c.jsxs)("select",{className:"form-control",id:"exampleFormControlSelect1",children:[Object(c.jsx)("option",{children:"1"}),Object(c.jsx)("option",{children:"2"}),Object(c.jsx)("option",{children:"3"}),Object(c.jsx)("option",{children:"4"}),Object(c.jsx)("option",{children:"5"})]})]}),Object(c.jsxs)("div",{className:"form-check",children:[Object(c.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:!0,id:"defaultCheck1"}),Object(c.jsx)("label",{className:"form-check-label",htmlFor:"defaultCheck1",children:"Use 24-hour time"})]})]}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",className:"btn shado-baground-textS btn-sm",children:"Savs change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec4")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]})]})]}),Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Sign-In Password:"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:["***************",Object(c.jsxs)("form",{id:"profile-pass",className:"profilrfrom",action:"#",encType:"text/plain",style:{display:"none"},children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsxs)("div",{className:"form-group",style:{maxWidth:330},children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]})}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",className:"btn shado-baground-textS btn-sm",children:"Savs change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-pass")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]})]})]})}),Object(c.jsx)("div",{className:"col-12 border-top p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-sm-3 lable",children:"Host Key:"}),Object(c.jsxs)("div",{className:"col-sm-9 position-relative",children:[Object(c.jsxs)("div",{className:"input-group col-sm-5",children:[Object(c.jsx)("input",{type:f,className:"form-control pwd",defaultValue:r.id,style:{border:0,margin:0,padding:0,height:25}}),Object(c.jsx)("span",{className:"input-group-btn",children:Object(c.jsx)("a",{className:"reveal c-text",type:"button",onClick:function(){return v("password"===f?"text":"password")},children:"Show"})})]}),Object(c.jsxs)("form",{className:"profilrfrom",id:"profile-sec5",action:"#",encType:"text/plain",style:{display:"none"},children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsxs)("div",{className:"form-group",style:{maxWidth:330},children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]})}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{type:"button",className:"btn shado-baground-textS btn-sm",children:"Savs change"}),Object(c.jsx)("button",{type:"button",onClick:function(){return x("profile-sec5")},className:"btn shado-baground-textC btn-sm",children:"Cancel"})]})]})]})]})})]})]})]})]})]})},lt=d.a.createContext(),dt=lt;function ut(e){return function(t){return Object(c.jsx)(lt.Consumer,{children:function(a){return Object(c.jsx)(e,Object(y.a)(Object(y.a)({},t),{},{roomClient:a}))}})}}var mt,pt=a(28),bt=a(27),ht=a(8),jt=a.n(ht),ft=(jt.a.shape({url:jt.a.string.isRequired,state:jt.a.oneOf(["new","connecting","connected","closed"]).isRequired,activeSpeakerName:jt.a.string}),jt.a.shape({flag:jt.a.string.isRequired,name:jt.a.string,version:jt.a.string})),vt=(jt.a.shape({id:jt.a.string.isRequired,displayName:jt.a.string,displayNameSet:jt.a.bool.isRequired,device:ft.isRequired,canSendMic:jt.a.bool.isRequired,canSendWebcam:jt.a.bool.isRequired,canChangeWebcam:jt.a.bool.isRequired,webcamInProgress:jt.a.bool.isRequired,audioOnly:jt.a.bool.isRequired,audioOnlyInProgress:jt.a.bool.isRequired,restartIceInProgress:jt.a.bool.isRequired}),jt.a.shape({id:jt.a.string.isRequired,deviceLabel:jt.a.string,type:jt.a.oneOf(["front","back","share"]),paused:jt.a.bool.isRequired,track:jt.a.any.isRequired,rtpParameters:jt.a.object.isRequired,codec:jt.a.string.isRequired}),jt.a.shape({id:jt.a.string.isRequired,sctpStreamParameters:jt.a.object.isRequired}),jt.a.shape({id:jt.a.string.isRequired,displayName:jt.a.string,device:ft.isRequired,consumers:jt.a.arrayOf(jt.a.string).isRequired}),jt.a.shape({id:jt.a.string.isRequired,locallyPaused:jt.a.bool.isRequired,remotelyPaused:jt.a.bool.isRequired,currentSpatialLayer:jt.a.number,preferredSpatialLayer:jt.a.number,track:jt.a.any,codec:jt.a.string}),jt.a.shape({id:jt.a.string.isRequired,sctpStreamParameters:jt.a.object.isRequired}),jt.a.shape({id:jt.a.string.isRequired,type:jt.a.oneOf(["info","error"]).isRequired,timeout:jt.a.number}),a(83)),xt=a.n(vt),gt=a(110),Ot=a(111),yt=(a(158),a(159),a(383)),Nt=a(384),kt=a(382),St=a(187),wt=a.n(St),_t=a(188),Pt=a.n(_t),Et=ut(Object(m.b)((function(e){var t=e.recordingBarUtil;return{startVisible:t.start,playVisible:t.play,pauseVisible:t.pause,stopVisible:t.stop}}),(function(e){return{operateRecording:function(t,a){e(function(e,t){return{type:"SET_RECORDING_OPERATION",payload:{key:e,value:t}}}(t,a))},comingSoon:function(){e(he({type:"error",text:"Coming soon..."}))}}}))((function(e){var t=e.roomClient,a=e.startVisible,r=e.playVisible,i=e.pauseVisible,s=e.stopVisible,l=e.operateRecording,u=e.comingSoon,m=Object(at.h)().rid,p=d.a.useState(null),b=Object(rt.a)(p,2),h=b[0],j=b[1],f=function(){var e=Object(o.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],j(null),e.next=4,y(t);case 4:l("start","none"),l("play","none"),l("pause","inline"),l("stop","inline");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.resume();case 2:l("play","none"),l("pause","inline");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.pause();case 2:l("pause","none"),l("play","inline");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.stop();case 2:l("start","inline"),l("play","none"),l("pause","none"),l("stop","none");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t){var a=URL.createObjectURL(e),r=document.createElement("a"),n=t?".mp3":".mp4";r.style.display="none",r.href=a,r.download=m+n,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)}),100)},y=function(){var e=Object(o.a)(n.a.mark((function e(a){var r,o,c,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:o=e.sent,e.next=13;break;case 6:return e.next=8,navigator.mediaDevices.getDisplayMedia({video:!0});case 8:return r=e.sent,e.next=11,navigator.mediaDevices.getUserMedia({audio:!0});case 11:o=e.sent,c=new MediaStream([o.getTracks()[0],r.getTracks()[0]]);case 13:mt=a?new MediaRecorder(o):new MediaRecorder(c),i=[],mt.ondataavailable=function(e){return i.push(e.data)},mt.onstop=function(e){var r=new Blob(i,{type:i[0].type});a?o.getTracks()[0].stop():c.getVideoTracks()[0].stop(),t.recordingStatus({message:""}),O(r,a)},mt.onstart=function(e){return t.recordingStatus({message:"Recording..."})},mt.onpause=function(){return t.recordingStatus({message:"Recording paused"})},mt.onresume=function(){return t.recordingStatus({message:"Recording..."})},mt.start();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{type:"button",style:{display:a},onClick:function(e){u()},className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Recording","data-original-title":"Record",children:Object(c.jsx)("i",{className:"fa fa-dot-circle-o","aria-hidden":"true"})}),Object(c.jsx)("button",{type:"button",style:{display:r},onClick:function(){return v()},className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Play","data-original-title":"Record",children:Object(c.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})}),Object(c.jsx)("button",{type:"button",style:{display:i},onClick:function(){return x()},className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Pause","data-original-title":"Record",children:Object(c.jsx)("i",{className:"fa fa-pause","aria-hidden":"true"})}),Object(c.jsx)("button",{type:"button",style:{display:s},onClick:function(){return g()},className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Stop","data-original-title":"Record",children:Object(c.jsx)("i",{className:"fa fa-stop","aria-hidden":"true"})}),Object(c.jsxs)(yt.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:function(){return j(null)},children:[Object(c.jsx)(Nt.a,{onClick:function(){return f()},children:Object(c.jsxs)(kt.a,{children:[Object(c.jsx)(wt.a,{fontSize:"small"}),"Audio"]})},0),Object(c.jsx)(Nt.a,{onClick:function(){return f(!1)},children:Object(c.jsxs)(kt.a,{children:[Object(c.jsx)(Pt.a,{fontSize:"small"}),"Screen"]})},1)]})]})}))),Ct=function(){var e=Object(l.useState)(!0),t=Object(rt.a)(e,2),a=t[0],r=t[1];return Object(c.jsx)("button",{type:"button",onClick:function(){return document.querySelector("a.thumbnail > video").style.transform=a?"scale(-1,1)":"scale(1,1)",void r(!a)},className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Mirror","data-original-title":"Record",children:a?Object(c.jsx)("i",{className:"material-icons",children:"cached"}):Object(c.jsx)("i",{className:"material-icons",children:"autorenew"})})},Tt=(a(77),a(78),function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).endCall=function(){var t=e.props.match.params.rid,a=JSON.parse(localStorage.getItem("user")).id;e.props.showMeetingLoader(),it.collection("meeting").where("userId","==",a).where("meetingId","==",t).get().then((function(t){0!==t.size?(e.props.roomClient.endCallForAll().then((function(){e.props.roomClient.close(),e.props.history.push("/")})),t.forEach((function(e){it.collection("meeting").doc(e.id).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))}))):(e.props.roomClient.close(),e.props.history.push("/"))})).catch((function(e){return console.log("Error getting documents: ",e)}))},e}return Object(j.a)(a,[{key:"render",value:function(){var e,t,a=this,r=this.props,n=r.roomClient,o=(r.connected,r.me),i=r.audioProducer,s=r.videoProducer,l=(r.faceDetection,r.onSetStatsPeerId,r.onRoomLinkCopy),d=r.comingSoon,u=(r.room,r.changeDisplayMode),m=r.displayMode,p=r.changeRightSideMode,b=r.rightSideMode,h=r.meetingLoader,j="Unlock World\nMake Your Life Easier with Unlock!\nhttps://meeting.unlockworld.net/room/"+this.props.match.params.rid+"\nRoom ID: "+this.props.match.params.rid;e=o.canSendMic&&i?i.paused?"off":"on":"unsupported",t=o.canSendWebcam?s&&"share"!==s.type?"on":"off":"unsupported",Boolean(s)&&"share"!==s.type&&o.canChangeWebcam,Boolean(s)&&s.type;Boolean(s)&&s.paused;return Object(c.jsx)("div",{className:"col-md-12 col-sm-12",children:Object(c.jsx)(gt.a,{renderChildren:!1,tag:"div",blocking:h.visible,loader:Object(c.jsx)(Ot.Loader,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},active:!0,type:"semi-circle-spin",color:"#FF5549"}),children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark scrolling-navbar overright-nabbar nopadding",children:[Object(c.jsx)("div",{className:"col-12 show-mobail",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-2 text-left",children:Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"","aria-controls":"","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("i",{className:"material-icons c-text",children:"menu"})})}),Object(c.jsxs)("div",{className:"col-8 text-center",children:[Object(c.jsx)("a",{className:"btn-floating",onClick:function(){"on"===e?n.muteMic():n.unmuteMic()},children:"on"===e?Object(c.jsx)("i",{className:"material-icons",children:"mic_none"}):Object(c.jsx)("i",{className:"material-icons",children:"mic_off"})}),Object(c.jsx)("a",{className:"btn-floating p-1",onClick:function(){"on"===t?(R({webcamEnabled:!1}),n.disableWebcam()):(R({webcamEnabled:!0}),n.enableWebcam())},children:"on"===t?Object(c.jsx)("i",{className:"material-icons",children:"videocam"}):Object(c.jsx)("i",{className:"material-icons",children:"videocam_off"})}),Object(c.jsx)("a",{className:"btn-floating  p-1",onClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button||(e.preventDefault(),xt()(j).then(l))},children:Object(c.jsx)("i",{className:"material-icons ",children:"person_add_alt_1"})}),Object(c.jsx)(ot.b,{condition:"grid"===m.mode,children:Object(c.jsx)("a",{className:"btn-floating p-1",onClick:function(){u("speaker")},children:Object(c.jsx)("span",{className:"material-icons",children:"insert_comment"})})}),Object(c.jsx)(ot.b,{condition:"speaker"===m.mode,children:Object(c.jsx)("a",{className:"btn-floating p-1",onClick:function(){u("grid")},children:Object(c.jsx)("span",{className:"material-icons",children:"grid_on"})})}),Object(c.jsx)(ot.b,{condition:"screen"===m.mode,children:Object(c.jsx)("a",{className:"btn-floating p-1",onClick:function(){u("grid")},children:Object(c.jsx)("span",{className:"material-icons",children:"grid_on"})})}),Object(c.jsx)(ot.b,{condition:"speaker"===m.mode,children:Object(c.jsxs)("a",{className:"btn-floating p-1",onClick:function(){p("chat"===b.mode?"list":"chat")},children:[Object(c.jsx)(ot.b,{condition:"chat"===b.mode,children:Object(c.jsx)("i",{className:"material-icons",children:"people_alt"})}),Object(c.jsx)(ot.b,{condition:"list"===b.mode,children:Object(c.jsx)("span",{className:"material-icons",children:"chat"})})]})})]}),Object(c.jsx)("div",{className:"col-2 text-right",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("a",{onClick:function(){return a.endCall()},className:"btn-floating btn btn-danger btn-sm shado-baground-textC",style:{padding:"5px",marginTop:"0px"},children:"End Call"})})})]})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent-9",children:Object(c.jsxs)("div",{className:"row grad-ation w-100",children:[Object(c.jsxs)("div",{className:"col-md-3 nopadding text-center group-btn-bottom",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm",title:"Audio","data-toggle":"tooltip","data-placement":"top",onClick:function(){"on"===e?n.muteMic():n.unmuteMic()},children:"on"===e?Object(c.jsx)("span",{className:"material-icons",children:"mic_none"}):Object(c.jsx)("span",{className:"material-icons",children:"mic_off"})}),Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Video",disabled:o.webcamInProgress||o.shareInProgress,onClick:function(){"on"===t?(R({webcamEnabled:!1}),n.disableWebcam()):(R({webcamEnabled:!0}),n.enableWebcam())},children:"on"===t?Object(c.jsx)("span",{className:"material-icons",children:"videocam"}):Object(c.jsx)("span",{className:"material-icons",children:"videocam_off"})})]}),Object(c.jsxs)("div",{className:"col-md-7 nopadding text-center group-btn-bottom",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-tooltip":"tooltip","data-placement":"top",title:"Invite",onClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button||(e.preventDefault(),xt()(j).then(l))},children:Object(c.jsx)("i",{className:"material-icons",children:"person_add_alt_1"})}),Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm active","data-toggle":"tooltip","data-placement":"top",title:"Share Screen",disabled:o.shareInProgress||o.webcamInProgress,onClick:function(){d()},children:Object(c.jsx)("i",{className:"material-icons",children:"screen_share"})}),Object(c.jsx)(ot.b,{condition:"grid"===m.mode,children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Chat",onClick:function(){u("speaker")},children:Object(c.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"})})}),Object(c.jsx)(ot.b,{condition:"speaker"===m.mode,children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Grid",onClick:function(){u("grid")},children:Object(c.jsx)("i",{className:"fa fa-th-large","aria-hidden":"true"})})}),Object(c.jsx)(ot.b,{condition:"screen"===m.mode,children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Chat",onClick:function(){u("speaker")},children:Object(c.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"})})}),Object(c.jsx)(ot.b,{condition:"speaker"===m.mode,children:Object(c.jsxs)("button",{type:"button",className:"btn btn-danger bmd-btn-fab bmd-btn-fab-sm","data-toggle":"tooltip","data-placement":"top",title:"Chat",onClick:function(){p("chat"===b.mode?"list":"chat")},children:[Object(c.jsx)(ot.b,{condition:"chat"===b.mode,children:Object(c.jsx)("i",{className:"material-icons",children:"people_alt"})}),Object(c.jsx)(ot.b,{condition:"list"===b.mode,children:Object(c.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"})})]})}),Object(c.jsx)(Et,{}),Object(c.jsx)(ot.b,{condition:"grid"===m.mode,children:Object(c.jsx)(Ct,{})})]}),Object(c.jsx)("div",{className:"col-md-2 nopadding text-center",children:Object(c.jsx)("button",{onClick:function(){return a.endCall()},className:"btn-floating btn btn-danger btn-sm shado-baground-textC btn-rounded end-call-round",children:Object(c.jsx)("span",{className:"mdc-button__label",children:"End Call"})})})]})})]})})})})}}]),a}(l.Component)),Rt=ut(Object(m.b)((function(e){var t=Object.values(e.producers),a=t.find((function(e){return"audio"===e.track.kind})),r=t.find((function(e){return"video"===e.track.kind}));return{connected:"connected"===e.room.state,me:e.me,room:e.room,audioProducer:a,videoProducer:r,faceDetection:e.room.faceDetection,onRoomLinkCopy:jt.a.func.isRequired,comingSoon:jt.a.func.isRequired,changeDisplayMode:jt.a.func.isRequired,displayMode:e.displayMode,rightSideMode:e.rightSideMode,meetingLoader:e.meetingLoader}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))},onRoomLinkCopy:function(){e(he({text:"Room link copied to the clipboard"}))},comingSoon:function(){e(he({type:"error",text:"Coming soon..."}))},changeDisplayMode:function(t){e(ue(t,null))},changeRightSideMode:function(t){e(function(e){return{type:"SET_RIGHT_SIDE_MODE",payload:{mode:e}}}(t))},showMeetingLoader:function(){e(pe(!0))}}}))(Tt)),Dt=Object(at.i)(Rt),Mt=a(63),It=a(66),At=a.n(It),Lt=a(40),Vt=new g("ScreenDetailsView"),qt=new Lt.a({inputSize:160,scoreThreshold:.5}),Ft=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={audioVolume:0,showInfo:window.SHOW_INFO||!1,videoResolutionWidth:null,videoResolutionHeight:null,videoCanPlay:!1,videoElemPaused:!1,maxSpatialLayer:null},r._videoTrack=null,r._hark=null,r._videoResolutionPeriodicTimer=null,r._faceDetectionRequestAnimationFrame=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.isMe,e.peer,e.audioProducerId,e.videoProducerId,e.audioConsumerId,e.videoConsumerId,e.videoRtpParameters,e.consumerSpatialLayers,e.consumerTemporalLayers,e.consumerCurrentSpatialLayer,e.consumerCurrentTemporalLayer,e.consumerPreferredSpatialLayer,e.consumerPreferredTemporalLayer,e.consumerPriority,e.audioMuted,e.videoVisible,e.videoMultiLayer,e.audioCodec,e.videoCodec,e.audioScore,e.videoScore,e.onChangeDisplayName,e.onChangeMaxSendingSpatialLayer,e.onChangeVideoPreferredLayers,e.onChangeVideoPriority,e.onRequestKeyFrame,e.onStatsClick,e.activeSpeakerId,e.audioEnabled,this.state);t.audioVolume,t.showInfo,t.videoResolutionWidth,t.videoResolutionHeight,t.videoCanPlay,t.videoElemPaused,t.maxSpatialLayer;return Object(c.jsx)("div",{className:"col-sm-12 border",children:Object(c.jsx)("video",{ref:"videoElem",style:{outlineStyle:"none",width:"100%"},autoPlay:!0,playsInline:!0,muted:!0,controls:!1})})}},{key:"truncatedText",value:function(e){return e.length>13?e.substring(0,13-"...".length)+"...":e}},{key:"componentDidMount",value:function(){var e=this.props,t=e.audioTrack,a=e.videoTrack;this._setTracks(t,a)}},{key:"componentWillUnmount",value:function(){this._hark&&this._hark.stop(),clearInterval(this._videoResolutionPeriodicTimer),cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.videoElem;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.isMe,a=e.audioTrack,r=e.videoTrack,n=e.videoRtpParameters,o=this.state.maxSpatialLayer;t&&n&&null===o?this.setState({maxSpatialLayer:n.encodings.length-1}):t&&!n&&null!==o&&this.setState({maxSpatialLayer:null}),this._setTracks(a,r)}},{key:"_setTracks",value:function(e,t){var a=this,r=this.props.faceDetection;if(this._audioTrack!==e||this._videoTrack!==t){this._audioTrack=e,this._videoTrack=t,this._hark&&this._hark.stop(),this._stopVideoResolution(),r&&this._stopFaceDetection();var n=this.refs.videoElem;if(t){var o=new MediaStream;o.addTrack(t),n.srcObject=o,n.oncanplay=function(){return a.setState({videoCanPlay:!0})},n.onplay=function(){a.setState({videoElemPaused:!1})},n.onpause=function(){return a.setState({videoElemPaused:!0})},n.play().catch((function(e){return Vt.warn("videoElem.play() failed:%o",e)})),this._startVideoResolution(),r&&this._startFaceDetection()}else n.srcObject=null}}},{key:"_runHark",value:function(e){var t=this;if(!e.getAudioTracks()[0])throw new Error("_runHark() | given stream has no audio track");this._hark=At()(e,{play:!1}),this._hark.on("volume_change",(function(e,a){var r=Math.round(10*Math.pow(10,e/85));1===r&&(r=0),r!==t.state.audioVolume&&t.setState({audioVolume:r})}))}},{key:"_startVideoResolution",value:function(){var e=this;this._videoResolutionPeriodicTimer=setInterval((function(){var t=e.state,a=t.videoResolutionWidth,r=t.videoResolutionHeight,n=e.refs.videoElem;n.videoWidth===a&&n.videoHeight===r||e.setState({videoResolutionWidth:n.videoWidth,videoResolutionHeight:n.videoHeight})}),500)}},{key:"_stopVideoResolution",value:function(){clearInterval(this._videoResolutionPeriodicTimer),this.setState({videoResolutionWidth:null,videoResolutionHeight:null})}},{key:"_startFaceDetection",value:function(){var e=this,t=this.refs,a=t.videoElem,r=t.canvas,c=function(){var t=Object(o.a)(n.a.mark((function t(){var o,i,s,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._videoTrack&&!(a.readyState<2)){t.next=3;break}return e._faceDetectionRequestAnimationFrame=requestAnimationFrame(c),t.abrupt("return");case 3:return t.next=5,Lt.b(a,qt);case 5:(o=t.sent)?(i=a.offsetWidth,s=a.offsetHeight,r.width=i,r.height=s,l=Lt.d(o,{width:i,height:s}),Lt.c.drawDetections(r,l)):(r.width=0,r.height=0),e._faceDetectionRequestAnimationFrame=requestAnimationFrame((function(){return setTimeout(c,100)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}},{key:"_stopFaceDetection",value:function(){cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.canvas;e.width=0,e.height=0}}]),a}(d.a.Component),Ht=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e))._mounted=!1,r._rootNode=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.roomClient,a=(e.connected,e.me),r=e.audioProducer,n=e.videoProducer,o=e.faceDetection,i=e.onSetStatsPeerId;a.canSendMic&&r&&r.paused,a.canSendWebcam&&(n&&n.type),Boolean(n)&&"share"!==n.type&&a.canChangeWebcam,Boolean(n)&&n.type;var s=Boolean(n)&&!n.paused;return a.displayNameSet||"Click on your name to change it",Object(c.jsx)(Ft,{isMe:!0,peer:a,audioProducerId:r?r.id:null,videoProducerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,videoVisible:s,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:o,onChangeDisplayName:function(e){t.changeDisplayName(e)},onChangeMaxSendingSpatialLayer:function(e){t.setMaxSendingSpatialLayer(e)},onStatsClick:i})}},{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,setTimeout((function(){e._mounted&&!e.props.me.displayNameSet&&Mt.a.show(e._rootNode)}),4e3)}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"componentDidUpdate",value:function(e){!e.me.displayNameSet&&this.props.me.displayNameSet&&Mt.a.hide(this._rootNode)}}]),a}(d.a.Component),Wt=ut(Object(m.b)((function(e){var t=Object.values(e.producers),a=t.find((function(e){return"audio"===e.track.kind})),r=t.find((function(e){return"video"===e.track.kind}));return{connected:"connected"===e.room.state,me:e.me,audioProducer:a,videoProducer:r,faceDetection:e.room.faceDetection}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))}}}))(Ht)),Ut=ut(Object(m.b)((function(e,t){var a=t.id,r=e.me,n=e.peers[a],o=n.consumers.map((function(t){return e.consumers[t]}));return{peer:n,audioConsumer:o.find((function(e){return"audio"===e.track.kind})),videoConsumer:o.find((function(e){return"video"===e.track.kind})),audioMuted:r.audioMuted,faceDetection:e.room.faceDetection,activeSpeakerId:e.room.activeSpeakerId}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))}}}))((function(e){var t=e.roomClient,a=e.peer,r=e.audioConsumer,n=e.videoConsumer,o=e.audioMuted,i=e.faceDetection,s=e.onSetStatsPeerId,l=e.activeSpeakerId,d=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,u=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused;return Object(c.jsx)(Ft,{audioEnabled:d,activeSpeakerId:l,peer:a,audioConsumerId:r?r.id:null,videoConsumerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,consumerSpatialLayers:n?n.spatialLayers:null,consumerTemporalLayers:n?n.temporalLayers:null,consumerCurrentSpatialLayer:n?n.currentSpatialLayer:null,consumerCurrentTemporalLayer:n?n.currentTemporalLayer:null,consumerPreferredSpatialLayer:n?n.preferredSpatialLayer:null,consumerPreferredTemporalLayer:n?n.preferredTemporalLayer:null,consumerPriority:n?n.priority:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,audioMuted:o,videoVisible:u,videoMultiLayer:n&&"simple"!==n.type,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:i,onChangeVideoPreferredLayers:function(e,a){t.setConsumerPreferredLayers(n.id,e,a)},onChangeVideoPriority:function(e){t.setConsumerPriority(n.id,e)},onRequestKeyFrame:function(){t.requestConsumerKeyFrame(n.id)},onStatsClick:s})}))),Bt=a.p+"static/media/speakerview.b98c4dae.svg",zt=a.p+"static/media/grid_view.7d54ab51.svg",Yt=Object(m.b)((function(e){return{message:e.recordingMessage.message}}),null)((function(e){var t=e.message;return Object(c.jsxs)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:[t,Object(c.jsxs)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters text-right text-light",children:[Object(c.jsx)("a",{id:"fullscreen",children:Object(c.jsx)("i",{className:"fa fa-square-o"})}),"\xa0\xa0\xa0\xa0\xa0"]})]})})),Kt=ut(Object(m.b)((function(e){var t=Object.values(e.peers);return{displayMode:e.displayMode,peers:t,me:e.me}}),(function(e){return{changeDisplayMode:function(t){e(ue(t,null))}}}))((function(e){var t=e.displayMode,a=e.changeDisplayMode,r=e.peers,n=e.me;return Object(c.jsx)("div",{id:"clearfullview",className:"container-fuid card clearfullview",children:Object(c.jsxs)("div",{className:"col-lg-12 col-md-12 col-lx-12 margin",style:{margin:"auto",padding:"8px 1% 0px 1%"},children:[Object(c.jsx)(Yt,{}),Object(c.jsx)("div",{id:"drawingboardview",style:{marginTop:10},children:Object(c.jsx)("div",{className:"row ",children:Object(c.jsxs)("div",{className:"col col-lg-12",children:[Object(c.jsx)("div",{className:"row mt-2",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-sm-12 text-right",children:Object(c.jsxs)("div",{className:"btn-group btn-group-sm c-gray",role:"group","aria-label":"Basic example",children:[Object(c.jsx)("a",{onClick:function(){a("speaker")},"data-toggle":"tooltip","data-placement":"top",title:"Spkaer View",children:Object(c.jsx)("img",{src:Bt})}),"\xa0\xa0",Object(c.jsx)("a",{onClick:function(){a("grid")},"data-toggle":"tooltip","data-placement":"top",title:"List View",children:Object(c.jsx)("img",{src:zt})})]})})})})}),Object(c.jsxs)(ot.b,{condition:n.id===t.screenId,children:[Object(c.jsx)(ot.c,{children:Object(c.jsx)(Wt,{})}),Object(c.jsx)(ot.a,{children:Object(c.jsx)(ot.b,{condition:r.map((function(e){return e.id})).includes(t.screenId),children:Object(c.jsx)(Ut,{id:t.screenId})})})]}),Object(c.jsx)(Dt,{})]})})})]})})}))),Gt=new g("AllAudioView"),Jt=new Lt.a({inputSize:160,scoreThreshold:.5}),Xt=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={audioVolume:0,showInfo:window.SHOW_INFO||!1,videoResolutionWidth:null,videoResolutionHeight:null,videoCanPlay:!1,videoElemPaused:!1,maxSpatialLayer:null},r._audioTrack=null,r._hark=null,r._videoResolutionPeriodicTimer=null,r._faceDetectionRequestAnimationFrame=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isMe,a=(e.peer,e.audioProducerId,e.videoProducerId,e.audioConsumerId,e.videoConsumerId,e.videoRtpParameters,e.consumerSpatialLayers,e.consumerTemporalLayers,e.consumerCurrentSpatialLayer,e.consumerCurrentTemporalLayer,e.consumerPreferredSpatialLayer,e.consumerPreferredTemporalLayer,e.consumerPriority,e.audioMuted),r=(e.videoVisible,e.videoMultiLayer,e.audioCodec,e.videoCodec,e.audioScore,e.videoScore,e.onChangeDisplayName,e.onChangeMaxSendingSpatialLayer,e.onChangeVideoPreferredLayers,e.onChangeVideoPriority,e.onRequestKeyFrame,e.onStatsClick,e.activeSpeakerId,e.audioEnabled,this.state);r.audioVolume,r.showInfo,r.videoResolutionWidth,r.videoResolutionHeight,r.videoCanPlay,r.videoElemPaused,r.maxSpatialLayer;return Object(c.jsx)("audio",{ref:"audioElem",autoPlay:!0,playsInline:!0,muted:t||a,controls:!1})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.audioTrack,a=e.videoTrack;this._setTracks(t,a)}},{key:"componentWillUnmount",value:function(){this._hark&&this._hark.stop(),clearInterval(this._videoResolutionPeriodicTimer),cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.videoElem;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.isMe,a=e.audioTrack,r=e.videoTrack,n=e.videoRtpParameters,o=this.state.maxSpatialLayer;t&&n&&null===o?this.setState({maxSpatialLayer:n.encodings.length-1}):t&&!n&&null!==o&&this.setState({maxSpatialLayer:null}),this._setTracks(a,r)}},{key:"_setTracks",value:function(e,t){var a=this.props.faceDetection;if(this._audioTrack!==e||this._videoTrack!==t){this._audioTrack=e,this._videoTrack=t,this._hark&&this._hark.stop(),this._stopVideoResolution(),a&&this._stopFaceDetection();var r=this.refs,n=r.audioElem;r.videoElem;if(e){var o=new MediaStream;o.addTrack(e),n.srcObject=o,n.play().catch((function(e){return Gt.warn("audioElem.play() failed:%o",e)})),this._runHark(o)}else n.srcObject=null}}},{key:"_runHark",value:function(e){var t=this;if(!e.getAudioTracks()[0])throw new Error("_runHark() | given stream has no audio track");this._hark=At()(e,{play:!1}),this._hark.on("volume_change",(function(e,a){var r=Math.round(10*Math.pow(10,e/85));1===r&&(r=0),r!==t.state.audioVolume&&t.setState({audioVolume:r})}))}},{key:"_startVideoResolution",value:function(){var e=this;this._videoResolutionPeriodicTimer=setInterval((function(){var t=e.state,a=t.videoResolutionWidth,r=t.videoResolutionHeight,n=e.refs.videoElem;n.videoWidth===a&&n.videoHeight===r||e.setState({videoResolutionWidth:n.videoWidth,videoResolutionHeight:n.videoHeight})}),500)}},{key:"_stopVideoResolution",value:function(){clearInterval(this._videoResolutionPeriodicTimer),this.setState({videoResolutionWidth:null,videoResolutionHeight:null})}},{key:"_startFaceDetection",value:function(){var e=this,t=this.refs,a=t.videoElem,r=t.canvas,c=function(){var t=Object(o.a)(n.a.mark((function t(){var o,i,s,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._videoTrack&&!(a.readyState<2)){t.next=3;break}return e._faceDetectionRequestAnimationFrame=requestAnimationFrame(c),t.abrupt("return");case 3:return t.next=5,Lt.b(a,Jt);case 5:(o=t.sent)?(i=a.offsetWidth,s=a.offsetHeight,r.width=i,r.height=s,l=Lt.d(o,{width:i,height:s}),Lt.c.drawDetections(r,l)):(r.width=0,r.height=0),e._faceDetectionRequestAnimationFrame=requestAnimationFrame((function(){return setTimeout(c,100)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}},{key:"_stopFaceDetection",value:function(){cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.canvas;e.width=0,e.height=0}}]),a}(d.a.Component),Qt=ut(Object(m.b)((function(e,t){var a=t.id,r=e.me,n=e.peers[a],o=n.consumers.map((function(t){return e.consumers[t]}));return{peer:n,audioConsumer:o.find((function(e){return"audio"===e.track.kind})),videoConsumer:o.find((function(e){return"video"===e.track.kind})),audioMuted:r.audioMuted,faceDetection:e.room.faceDetection,activeSpeakerId:e.room.activeSpeakerId}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))}}}))((function(e){var t=e.roomClient,a=e.peer,r=e.audioConsumer,n=e.videoConsumer,o=e.audioMuted,i=e.faceDetection,s=e.onSetStatsPeerId,l=e.activeSpeakerId,d=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,u=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused;return Object(c.jsx)(Xt,{audioEnabled:d,activeSpeakerId:l,peer:a,audioConsumerId:r?r.id:null,videoConsumerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,consumerSpatialLayers:n?n.spatialLayers:null,consumerTemporalLayers:n?n.temporalLayers:null,consumerCurrentSpatialLayer:n?n.currentSpatialLayer:null,consumerCurrentTemporalLayer:n?n.currentTemporalLayer:null,consumerPreferredSpatialLayer:n?n.preferredSpatialLayer:null,consumerPreferredTemporalLayer:n?n.preferredTemporalLayer:null,consumerPriority:n?n.priority:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,audioMuted:o,videoVisible:u,videoMultiLayer:n&&"simple"!==n.type,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:i,onChangeVideoPreferredLayers:function(e,a){t.setConsumerPreferredLayers(n.id,e,a)},onChangeVideoPriority:function(e){t.setConsumerPriority(n.id,e)},onRequestKeyFrame:function(){t.requestConsumerKeyFrame(n.id)},onStatsClick:s})}))),Zt=new g("PeerViewGrid"),$t=new Lt.a({inputSize:160,scoreThreshold:.5}),ea=ut(function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={audioVolume:0,showInfo:window.SHOW_INFO||!1,videoResolutionWidth:null,videoResolutionHeight:null,videoCanPlay:!1,videoElemPaused:!1,maxSpatialLayer:null},r._videoTrack=null,r._hark=null,r._videoResolutionPeriodicTimer=null,r._faceDetectionRequestAnimationFrame=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,r=a.isMe,n=a.peer,o=(a.audioProducerId,a.videoProducerId,a.audioConsumerId,a.videoConsumerId,a.videoRtpParameters,a.consumerSpatialLayers,a.consumerTemporalLayers,a.consumerCurrentSpatialLayer,a.consumerCurrentTemporalLayer,a.consumerPreferredSpatialLayer,a.consumerPreferredTemporalLayer,a.consumerPriority,a.audioMuted,a.videoVisible),i=(a.videoMultiLayer,a.audioCodec,a.videoCodec,a.audioScore,a.videoScore,a.onChangeDisplayName,a.onChangeMaxSendingSpatialLayer,a.onChangeVideoPreferredLayers,a.onChangeVideoPriority,a.onRequestKeyFrame,a.onStatsClick,a.activeSpeakerId),s=a.audioEnabled,l=a.makeScreenDetails,d=a.peers,u=this.state,m=(u.audioVolume,u.showInfo,u.videoResolutionWidth,u.videoResolutionHeight,u.videoCanPlay,u.videoElemPaused,u.maxSpatialLayer,Object.values(d||{}).length);return e=0===m?{width:"100%",maxHeight:"626px"}:m>=1&&m<=3?{width:"50%",maxHeight:"313px"}:m>=4&&m<=5?{width:100/3+"%",maxHeight:626/3+"px"}:{width:"25%",maxHeight:"156.5px"},Object(c.jsx)("div",{className:"participant",style:e,children:Object(c.jsxs)("a",{className:"thumbnail",onClick:function(){return l(n.id)},children:[Object(c.jsx)("video",{height:"auto",ref:"videoElem",autoPlay:!0,playsInline:!0,muted:!0,controls:!1,poster:"data:image/png;base64,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HW85G98+3hArnrohYrTpt7ZdbsVWqZqqQVXVu9NpwlUIwzBQKpZENCfDifgAsmAXxF7Y6XT6biOrerUOVbkfab8W7XgOXVEUpNNpEeZucBu5+01fvKnMxjNMhhMUnSIUWcGwN7wdi/bASLvjdzAdTjEZTDAZTnisGTHa9DXEEXZLLtqtNtqtNopO8e7Dx6pbFSHNZXPiw8H4oIN8Lo+230bQCsQpN/HhB41q4y7ahnF//Fm4DsVmUb7no91qo9VoQVM1FOwCzoezeLzPN5KK/yXQqDVuP/+faL+2eiSe035+1iYRo01fQrSNoOu33fSeB3QxXYhDCeKNo6ajKVKp1O0EHC/4PnL95yDg+Iix6/G2OZShG2K0G4+e46WA8cEJtmWj5JTgFBw06000681EfMWKj1JZTN/EH4JmM1mUnBIKdgGqqkJRFMxGMzwdnsTI37bs2woR20Gj2sD5cBZTQflcXty3YztoNVt8TRCjTb+33WoH27Lhe35i9cR5f0aj1kCpWBLTBsfweDvkwC6IDxCPuyOqbhXlYjlxOvv1eEU36KJgF7CardBr9+AUHHG7oBUk1kjnc3lU3eptnfez74vNx3NYeQvD3hDjwRi2ZYvbxfGN3zTOhzO8hid+di6bQz6Xh1tycd6f0Q26ifuNvVymSMRoExEx2kRExGgTERGjTUTEaBMREaNNRESMNhERo01ERIw2EREx2kREjDYRETHaRETEaBMRMdpERMRoExERo01ExGgTERGjTUREjDYREaNNRESMNhERo80ngYiI0SYiIkabiIjR5hNBRMRoExERo01ExGgTERGjTUREjDYREaNNRESMNhERMdpERIw2EREx2kRExGgTETHaRETEaBMREaNNRMRoExERo01ERIw2ERGjTUREjDYRETHaRESMNhERMdpERMRoExEx2kRExGgTERGjTUTEaBMREaNNRESMNhERo01ERIw2ERG93/8PAIdnAsgAQzHiAAAAAElFTkSuQmCC"}),Object(c.jsx)("div",{className:"description",style:{borderColor:n.id===i?"#f50057":"transparent"},children:Object(c.jsxs)(ot.b,{condition:!0===r,children:[Object(c.jsx)(ot.c,{children:Object(c.jsxs)("h4",{children:[this.truncatedText(n.displayName)," (Me)"]})}),Object(c.jsx)(ot.a,{children:Object(c.jsxs)("h4",{onClick:function(e){return e.stopPropagation()},children:[this.truncatedText(n.displayName),"\xa0\xa0",Object(c.jsx)(ot.b,{condition:!o,children:Object(c.jsx)("i",{className:"fa fa-eye-slash"})}),Object(c.jsx)(ot.b,{condition:o,children:Object(c.jsx)("i",{className:"fa fa-video-camera",onClick:function(){return t.hostMuteUnmute("VIDEO",n.id)}})}),Object(c.jsx)(ot.b,{condition:!s,children:Object(c.jsx)("i",{className:"fa fa-microphone-slash"})}),Object(c.jsx)(ot.b,{condition:s,children:Object(c.jsx)("i",{className:"fa fa-microphone",onClick:function(){return t.hostMuteUnmute("AUDIO",n.id)}})})]})})]})})]})})}},{key:"truncatedText",value:function(e){return e.length>13?e.substring(0,13-"...".length)+"...":e}},{key:"hostMuteUnmute",value:function(e,t){var a=this,r=this.props.match.params.rid,n=JSON.parse(localStorage.getItem("user")).id;it.collection("meeting").where("userId","==",n).where("meetingId","==",r).get().then((function(r){0!==r.size&&a.props.roomClient.controlOverAudioVideoByHost({type:e,peerId:t})})).catch((function(e){return console.log("Error getting documents: ",e)}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.audioTrack,a=e.videoTrack;this._setTracks(t,a)}},{key:"componentWillUnmount",value:function(){this._hark&&this._hark.stop(),clearInterval(this._videoResolutionPeriodicTimer),cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.videoElem;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.isMe,a=e.audioTrack,r=e.videoTrack,n=e.videoRtpParameters,o=this.state.maxSpatialLayer;t&&n&&null===o?this.setState({maxSpatialLayer:n.encodings.length-1}):t&&!n&&null!==o&&this.setState({maxSpatialLayer:null}),this._setTracks(a,r)}},{key:"_setTracks",value:function(e,t){var a=this,r=this.props.faceDetection;if(this._audioTrack!==e||this._videoTrack!==t){this._audioTrack=e,this._videoTrack=t,this._hark&&this._hark.stop(),this._stopVideoResolution(),r&&this._stopFaceDetection();var n=this.refs.videoElem;if(t){var o=new MediaStream;o.addTrack(t),n.srcObject=o,n.oncanplay=function(){return a.setState({videoCanPlay:!0})},n.onplay=function(){a.setState({videoElemPaused:!1})},n.onpause=function(){return a.setState({videoElemPaused:!0})},n.play().catch((function(e){return Zt.warn("videoElem.play() failed:%o",e)})),this._startVideoResolution(),r&&this._startFaceDetection()}else n.srcObject=null}}},{key:"_runHark",value:function(e){var t=this;if(!e.getAudioTracks()[0])throw new Error("_runHark() | given stream has no audio track");this._hark=At()(e,{play:!1}),this._hark.on("volume_change",(function(e,a){var r=Math.round(10*Math.pow(10,e/85));1===r&&(r=0),r!==t.state.audioVolume&&t.setState({audioVolume:r})}))}},{key:"_startVideoResolution",value:function(){var e=this;this._videoResolutionPeriodicTimer=setInterval((function(){var t=e.state,a=t.videoResolutionWidth,r=t.videoResolutionHeight,n=e.refs.videoElem;n.videoWidth===a&&n.videoHeight===r||e.setState({videoResolutionWidth:n.videoWidth,videoResolutionHeight:n.videoHeight})}),500)}},{key:"_stopVideoResolution",value:function(){clearInterval(this._videoResolutionPeriodicTimer),this.setState({videoResolutionWidth:null,videoResolutionHeight:null})}},{key:"_startFaceDetection",value:function(){var e=this,t=this.refs,a=t.videoElem,r=t.canvas,c=function(){var t=Object(o.a)(n.a.mark((function t(){var o,i,s,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._videoTrack&&!(a.readyState<2)){t.next=3;break}return e._faceDetectionRequestAnimationFrame=requestAnimationFrame(c),t.abrupt("return");case 3:return t.next=5,Lt.b(a,$t);case 5:(o=t.sent)?(i=a.offsetWidth,s=a.offsetHeight,r.width=i,r.height=s,l=Lt.d(o,{width:i,height:s}),Lt.c.drawDetections(r,l)):(r.width=0,r.height=0),e._faceDetectionRequestAnimationFrame=requestAnimationFrame((function(){return setTimeout(c,100)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}},{key:"_stopFaceDetection",value:function(){cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.canvas;e.width=0,e.height=0}}]),a}(d.a.Component)),ta=Object(at.i)(ea),aa=ut(Object(m.b)((function(e,t){var a=t.id,r=e.me,n=e.peers[a],o=n.consumers.map((function(t){return e.consumers[t]}));return{peer:n,audioConsumer:o.find((function(e){return"audio"===e.track.kind})),videoConsumer:o.find((function(e){return"video"===e.track.kind})),audioMuted:r.audioMuted,faceDetection:e.room.faceDetection,activeSpeakerId:e.room.activeSpeakerId,peers:e.peers}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))},changeDisplayMode:function(t,a){e(ue(t,a))}}}))((function(e){var t=e.roomClient,a=e.peer,r=e.audioConsumer,n=e.videoConsumer,o=e.audioMuted,i=e.faceDetection,s=e.onSetStatsPeerId,l=e.activeSpeakerId,d=e.changeDisplayMode,u=e.peers,m=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,p=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused;return Object(c.jsx)(ta,{peers:u,makeScreenDetails:function(e){d("screen",e)},audioEnabled:m,activeSpeakerId:l,peer:a,audioConsumerId:r?r.id:null,videoConsumerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,consumerSpatialLayers:n?n.spatialLayers:null,consumerTemporalLayers:n?n.temporalLayers:null,consumerCurrentSpatialLayer:n?n.currentSpatialLayer:null,consumerCurrentTemporalLayer:n?n.currentTemporalLayer:null,consumerPreferredSpatialLayer:n?n.preferredSpatialLayer:null,consumerPreferredTemporalLayer:n?n.preferredTemporalLayer:null,consumerPriority:n?n.priority:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,audioMuted:o,videoVisible:p,videoMultiLayer:n&&"simple"!==n.type,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:i,onChangeVideoPreferredLayers:function(e,a){t.setConsumerPreferredLayers(n.id,e,a)},onChangeVideoPriority:function(e){t.setConsumerPriority(n.id,e)},onRequestKeyFrame:function(){t.requestConsumerKeyFrame(n.id)},onStatsClick:s})}))),ra=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e))._mounted=!1,r._rootNode=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.roomClient,a=(e.connected,e.me),r=e.audioProducer,n=e.videoProducer,o=e.faceDetection,i=e.onSetStatsPeerId,s=e.changeDisplayMode,l=e.peers;a.canSendMic&&r&&r.paused,a.canSendWebcam&&(n&&n.type),Boolean(n)&&"share"!==n.type&&a.canChangeWebcam,Boolean(n)&&n.type;var d=Boolean(n)&&!n.paused;a.displayNameSet;return Object(c.jsx)(ta,{peers:l,makeScreenDetails:function(e){s("screen",e)},isMe:!0,peer:a,audioProducerId:r?r.id:null,videoProducerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,videoVisible:d,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:o,onChangeDisplayName:function(e){t.changeDisplayName(e)},onChangeMaxSendingSpatialLayer:function(e){t.setMaxSendingSpatialLayer(e)},onStatsClick:i})}},{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,setTimeout((function(){e._mounted&&!e.props.me.displayNameSet&&Mt.a.show(e._rootNode)}),4e3)}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"componentDidUpdate",value:function(e){!e.me.displayNameSet&&this.props.me.displayNameSet&&Mt.a.hide(this._rootNode)}}]),a}(d.a.Component),na=ut(Object(m.b)((function(e){var t=Object.values(e.producers),a=t.find((function(e){return"audio"===e.track.kind})),r=t.find((function(e){return"video"===e.track.kind}));return{connected:"connected"===e.room.state,me:e.me,audioProducer:a,videoProducer:r,faceDetection:e.room.faceDetection,peers:e.peers}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))},changeDisplayMode:function(t,a){e(ue(t,a))}}}))(ra)),oa=Object(m.b)((function(e){return{peers:Object.values(e.peers)}}),(function(e){return{changeDisplayMode:function(t){e(ue(t,null))}}}))((function(e){var t=e.peers,a=e.changeDisplayMode,r=d.a.useState(1),n=Object(rt.a)(r,2),o=n[0],i=n[1],s=function(e,t,a){var r=t||1,n=a||10,o=(r-1)*n,c=e.slice(o).slice(0,a),i=Math.ceil(e.length/n);return{page:r,per_page:n,pre_page:r-1?r-1:null,next_page:i>r?r+1:null,total:e.length,total_pages:i,data:c}};return Object(c.jsx)("main",{children:Object(c.jsxs)("div",{id:"clearfullview",className:"container-fuid card clearfullview",children:[Object(c.jsx)(Yt,{}),Object(c.jsxs)("div",{className:"btn-group btn-group-sm top-right-button c-gray",children:[Object(c.jsx)("a",{onClick:function(){a("speaker")},"data-toggle":"tooltip","data-placement":"top",title:"Speaker View",children:Object(c.jsx)("img",{src:Bt})}),"\xa0\xa0",Object(c.jsx)("a",{onClick:function(){a("grid")},"data-toggle":"tooltip","data-placement":"top",title:"List View",children:Object(c.jsx)("img",{src:zt})})]}),Object(c.jsxs)("div",{className:"col-lg-11 col-md-11 col-lx-12 margin",style:{margin:"auto",padding:"8px 5% 0px 5%"},children:[Object(c.jsx)("div",{className:"min-hidgrid",children:Object(c.jsxs)("div",{id:"galleryview",className:"d-flex flex-wrap justify-content-center p-relative wrap",children:[Object(c.jsx)(na,{}),s(t,o,11).data.map((function(e){return Object(c.jsx)(aa,{id:e.id},e.id)}))]})}),Object(c.jsx)(Dt,{}),Object(c.jsx)(ot.b,{condition:Boolean(s(t,o,11).pre_page),children:Object(c.jsx)("a",{className:"left carousel-control shado-baground-textC",onClick:function(){return i(o-1)},children:Object(c.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"})})}),Object(c.jsx)(ot.b,{condition:Boolean(s(t,o,11).next_page),children:Object(c.jsx)("a",{className:"right carousel-control shado-baground-textC",onClick:function(){return i(o+1)},children:Object(c.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})})})]})]})})})),ca=(d.a.Component,d.a.Component,new g("MeBottomPortionView")),ia=new Lt.a({inputSize:160,scoreThreshold:.5}),sa=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={audioVolume:0,showInfo:window.SHOW_INFO||!1,videoResolutionWidth:null,videoResolutionHeight:null,videoCanPlay:!1,videoElemPaused:!1,maxSpatialLayer:null},r._videoTrack=null,r._hark=null,r._videoResolutionPeriodicTimer=null,r._faceDetectionRequestAnimationFrame=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isMe,a=e.peer,r=(e.audioProducerId,e.videoProducerId,e.audioConsumerId,e.videoConsumerId,e.videoRtpParameters,e.consumerSpatialLayers,e.consumerTemporalLayers,e.consumerCurrentSpatialLayer,e.consumerCurrentTemporalLayer,e.consumerPreferredSpatialLayer,e.consumerPreferredTemporalLayer,e.consumerPriority,e.audioMuted,e.videoVisible),n=(e.videoMultiLayer,e.audioCodec,e.videoCodec,e.audioScore,e.videoScore,e.onChangeDisplayName,e.onChangeMaxSendingSpatialLayer,e.onChangeVideoPreferredLayers,e.onChangeVideoPriority,e.onRequestKeyFrame,e.onStatsClick,e.activeSpeakerId,e.audioEnabled),o=this.state;o.audioVolume,o.showInfo,o.videoResolutionWidth,o.videoResolutionHeight,o.videoCanPlay,o.videoElemPaused,o.maxSpatialLayer;return Object(c.jsx)("div",{className:"singal-profile w-100 d-flex justify-content-center mt-3",children:Object(c.jsx)("div",{className:"participant border",children:Object(c.jsxs)("a",{className:"thumbnail",children:[Object(c.jsx)("video",{ref:"videoElem",style:{outlineStyle:"none",weight:"100%"},autoPlay:!0,playsInline:!0,muted:!0,controls:!1}),Object(c.jsx)("div",{className:"description",children:Object(c.jsxs)(ot.b,{condition:!0===t,children:[Object(c.jsx)(ot.c,{children:Object(c.jsxs)("h4",{children:[this.truncatedText(a.displayName)," (Me)"]})}),Object(c.jsx)(ot.a,{children:Object(c.jsxs)("h4",{children:[this.truncatedText(a.displayName),Object(c.jsx)(ot.b,{condition:!r,children:Object(c.jsx)("i",{className:"material-icons",children:"videocam_off"})}),Object(c.jsx)(ot.b,{condition:!n,children:Object(c.jsx)("i",{className:"material-icons",children:"mic_off"})})]})})]})})]})})})}},{key:"truncatedText",value:function(e){return e.length>13?e.substring(0,13-"...".length)+"...":e}},{key:"componentDidMount",value:function(){var e=this.props,t=e.audioTrack,a=e.videoTrack;this._setTracks(t,a)}},{key:"componentWillUnmount",value:function(){this._hark&&this._hark.stop(),clearInterval(this._videoResolutionPeriodicTimer),cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.videoElem;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.isMe,a=e.audioTrack,r=e.videoTrack,n=e.videoRtpParameters,o=this.state.maxSpatialLayer;t&&n&&null===o?this.setState({maxSpatialLayer:n.encodings.length-1}):t&&!n&&null!==o&&this.setState({maxSpatialLayer:null}),this._setTracks(a,r)}},{key:"_setTracks",value:function(e,t){var a=this,r=this.props.faceDetection;if(this._audioTrack!==e||this._videoTrack!==t){this._audioTrack=e,this._videoTrack=t,this._hark&&this._hark.stop(),this._stopVideoResolution(),r&&this._stopFaceDetection();var n=this.refs.videoElem;if(t){var o=new MediaStream;o.addTrack(t),n.srcObject=o,n.oncanplay=function(){return a.setState({videoCanPlay:!0})},n.onplay=function(){a.setState({videoElemPaused:!1})},n.onpause=function(){return a.setState({videoElemPaused:!0})},n.play().catch((function(e){return ca.warn("videoElem.play() failed:%o",e)})),this._startVideoResolution(),r&&this._startFaceDetection()}else n.srcObject=null}}},{key:"_runHark",value:function(e){var t=this;if(!e.getAudioTracks()[0])throw new Error("_runHark() | given stream has no audio track");this._hark=At()(e,{play:!1}),this._hark.on("volume_change",(function(e,a){var r=Math.round(10*Math.pow(10,e/85));1===r&&(r=0),r!==t.state.audioVolume&&t.setState({audioVolume:r})}))}},{key:"_startVideoResolution",value:function(){var e=this;this._videoResolutionPeriodicTimer=setInterval((function(){var t=e.state,a=t.videoResolutionWidth,r=t.videoResolutionHeight,n=e.refs.videoElem;n.videoWidth===a&&n.videoHeight===r||e.setState({videoResolutionWidth:n.videoWidth,videoResolutionHeight:n.videoHeight})}),500)}},{key:"_stopVideoResolution",value:function(){clearInterval(this._videoResolutionPeriodicTimer),this.setState({videoResolutionWidth:null,videoResolutionHeight:null})}},{key:"_startFaceDetection",value:function(){var e=this,t=this.refs,a=t.videoElem,r=t.canvas,c=function(){var t=Object(o.a)(n.a.mark((function t(){var o,i,s,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._videoTrack&&!(a.readyState<2)){t.next=3;break}return e._faceDetectionRequestAnimationFrame=requestAnimationFrame(c),t.abrupt("return");case 3:return t.next=5,Lt.b(a,ia);case 5:(o=t.sent)?(i=a.offsetWidth,s=a.offsetHeight,r.width=i,r.height=s,l=Lt.d(o,{width:i,height:s}),Lt.c.drawDetections(r,l)):(r.width=0,r.height=0),e._faceDetectionRequestAnimationFrame=requestAnimationFrame((function(){return setTimeout(c,100)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}},{key:"_stopFaceDetection",value:function(){cancelAnimationFrame(this._faceDetectionRequestAnimationFrame);var e=this.refs.canvas;e.width=0,e.height=0}}]),a}(d.a.Component),la=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e))._mounted=!1,r._rootNode=null,r}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.roomClient,a=(e.connected,e.me),r=e.audioProducer,n=e.videoProducer,o=e.faceDetection,i=e.onSetStatsPeerId;a.canSendMic&&r&&r.paused,a.canSendWebcam&&(n&&n.type),Boolean(n)&&"share"!==n.type&&a.canChangeWebcam,Boolean(n)&&n.type;var s=Boolean(n)&&!n.paused;return a.displayNameSet||"Click on your name to change it",Object(c.jsx)(sa,{isMe:!0,peer:a,audioProducerId:r?r.id:null,videoProducerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,videoVisible:s,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:o,onChangeDisplayName:function(e){t.changeDisplayName(e)},onChangeMaxSendingSpatialLayer:function(e){t.setMaxSendingSpatialLayer(e)},onStatsClick:i})}},{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,setTimeout((function(){e._mounted&&!e.props.me.displayNameSet&&Mt.a.show(e._rootNode)}),4e3)}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"componentDidUpdate",value:function(e){!e.me.displayNameSet&&this.props.me.displayNameSet&&Mt.a.hide(this._rootNode)}}]),a}(d.a.Component),da=ut(Object(m.b)((function(e){var t=Object.values(e.producers),a=t.find((function(e){return"audio"===e.track.kind})),r=t.find((function(e){return"video"===e.track.kind}));return{connected:"connected"===e.room.state,me:e.me,audioProducer:a,videoProducer:r,faceDetection:e.room.faceDetection}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))}}}))(la)),ua=ut(Object(m.b)((function(e,t){var a=t.id,r=e.me,n=e.peers[a],o=n.consumers.map((function(t){return e.consumers[t]}));return{peer:n,audioConsumer:o.find((function(e){return"audio"===e.track.kind})),videoConsumer:o.find((function(e){return"video"===e.track.kind})),audioMuted:r.audioMuted,faceDetection:e.room.faceDetection,activeSpeakerId:e.room.activeSpeakerId}}),(function(e){return{onSetStatsPeerId:function(t){return e(V(t))}}}))((function(e){var t=e.roomClient,a=e.peer,r=e.audioConsumer,n=e.videoConsumer,o=e.audioMuted,i=e.faceDetection,s=e.onSetStatsPeerId,l=e.activeSpeakerId,d=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,u=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused;return Object(c.jsx)(sa,{audioEnabled:d,activeSpeakerId:l,peer:a,audioConsumerId:r?r.id:null,videoConsumerId:n?n.id:null,audioRtpParameters:r?r.rtpParameters:null,videoRtpParameters:n?n.rtpParameters:null,consumerSpatialLayers:n?n.spatialLayers:null,consumerTemporalLayers:n?n.temporalLayers:null,consumerCurrentSpatialLayer:n?n.currentSpatialLayer:null,consumerCurrentTemporalLayer:n?n.currentTemporalLayer:null,consumerPreferredSpatialLayer:n?n.preferredSpatialLayer:null,consumerPreferredTemporalLayer:n?n.preferredTemporalLayer:null,consumerPriority:n?n.priority:null,audioTrack:r?r.track:null,videoTrack:n?n.track:null,audioMuted:o,videoVisible:u,videoMultiLayer:n&&"simple"!==n.type,audioCodec:r?r.codec:null,videoCodec:n?n.codec:null,audioScore:r?r.score:null,videoScore:n?n.score:null,faceDetection:i,onChangeVideoPreferredLayers:function(e,a){t.setConsumerPreferredLayers(n.id,e,a)},onChangeVideoPriority:function(e){t.setConsumerPriority(n.id,e)},onRequestKeyFrame:function(){t.requestConsumerKeyFrame(n.id)},onStatsClick:s})}))),ma=ut(Object(m.b)((function(e){return{activeSpeakerId:e.room.activeSpeakerId,amActiveSpeaker:e.me.id===e.room.activeSpeakerId}}),null)((function(e){var t=e.activeSpeakerId,a=e.amActiveSpeaker;return Object(c.jsxs)("div",{className:"col-md-9",children:[Object(c.jsxs)(ot.b,{condition:!0===Boolean(t),children:[Object(c.jsx)(ot.c,{children:Object(c.jsxs)(ot.b,{condition:a,children:[Object(c.jsx)(ot.c,{children:Object(c.jsx)(da,{})}),Object(c.jsx)(ot.a,{children:Object(c.jsx)(ua,{id:t})})]})}),Object(c.jsx)(ot.a,{children:Object(c.jsx)(da,{})})]}),Object(c.jsx)(Dt,{})]})}))),pa=ut(Object(m.b)((function(e){return{peers:Object.values(e.peers),activeSpeakerId:e.room.activeSpeakerId,invalidMessage:jt.a.func.isRequired}}),(function(e){return{invalidMessage:function(){e(he({type:"error",text:"No participant selected"}))}}}))((function(e){var t=d.a.useState(""),a=Object(rt.a)(t,2),r=a[0],n=a[1],o=d.a.useState("0"),i=Object(rt.a)(o,2),s=i[0],l=i[1],u=d.a.useState([]),m=Object(rt.a)(u,2),p=m[0],b=m[1],h=e.peers,j=e.invalidMessage,f=e.roomClient;d.a.useEffect((function(){var e=h.map((function(e){return{displayName:e.displayName,id:e.id}}));b(e)}),[h]);return Object(c.jsx)("div",{className:"siderbarfooter text-center col border-top",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{id:"chatMessage",style:{width:"100%"},name:"chatMessage",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"input-group p-1",children:[Object(c.jsx)("label",{className:"input-group-text c-text",htmlFor:"inputGroupSelect01",style:{border:"unset",background:"unset"},children:"To:"}),Object(c.jsxs)("select",{defaultValue:"0",className:"custom-select selectCustom pd5",id:"inputGroupSelect01",onChange:function(e){return l(e.target.value)},children:[Object(c.jsx)("option",{value:"0",children:"select..."}),Object(c.jsx)("option",{value:"1",children:"All Participants"}),p.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.displayName},e.id)}))]})]})})}),Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("textarea",{style:{border:"0px"},placeholder:"Type Message Here...",id:"messageTypehere",onKeyPress:function(e){return function(e){if(!Boolean(e.target.value))return!1;if("Enter"===e.key){var t={message:r,receiver:s,time:(new Date).getTime()};if(n(""),e.preventDefault(),0===Number(s)||!p.some((function(e){return e.id===s}))&&1!==Number(s))return void j();var a=Object(y.a)(Object(y.a)({},t),{},{group:1===Number(s)});f.meetingChat(a)}}(e)},onChange:function(e){return n(e.target.value)},value:r})})]})})})}))),ba=a(55),ha=a.n(ba),ja=Object(m.b)((function(e){return{textMessaging:e.textMessaging}}),null)((function(e){return Object(c.jsx)("div",{className:"col-md-3 nopadding",children:Object(c.jsxs)("div",{className:"search-widget w-100 border-left rounded-left mon-border-4",children:[Object(c.jsx)("div",{className:"sider-barheader",children:"Group Chat"}),Object(c.jsx)("div",{className:"message-history nopadding col-md-12",children:e.textMessaging.sort((function(e,t){return e.time>t.time?1:-1})).map((function(e,t){return Object(c.jsxs)("p",{className:ha()(!0===e.isMe&&"rightText text-right"),style:{textAlign:!0!==e.isMe&&"left"},children:[Object(c.jsxs)("span",{children:[e.sender,": ",!0===e.isMe&&e.message]}),!1===e.isMe&&e.message]},t)}))}),Object(c.jsx)(pa,{})]})})})),fa=ut(Object(m.b)((function(e,t){var a=t.id,r=e.peers[a];if(!Boolean(r))return{};var n=r.consumers.map((function(t){return e.consumers[t]}));return{peer:r,audioConsumer:n.find((function(e){return"audio"===e.track.kind})),videoConsumer:n.find((function(e){return"video"===e.track.kind}))}}),null)((function(e){var t,a=Object(at.h)().rid,r=e.audioConsumer,n=e.videoConsumer,o=e.id,i=e.roomClient,s=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,l=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused;function d(e,t){var r=a,n=JSON.parse(localStorage.getItem("user")).id;it.collection("meeting").where("userId","==",n).where("meetingId","==",r).get().then((function(a){0!==a.size&&i.controlOverAudioVideoByHost({type:e,peerId:t})})).catch((function(e){return console.log("Error getting documents: ",e)}))}return Object(c.jsx)("li",{children:Object(c.jsxs)("a",{className:"d-flex justify-content-between",children:[Object(c.jsx)("span",{className:"material-icons",children:"person_pin"}),Object(c.jsx)("div",{className:"w-75 ",children:Object(c.jsx)("strong",{children:(t=e.displayName,t.length>23?t.substring(0,23-"...".length)+"...":t)})}),Object(c.jsxs)("div",{className:"chat-footer",children:[Object(c.jsx)(ot.b,{condition:!l,children:Object(c.jsx)("i",{className:"material-icons",children:"videocam_off"})}),Object(c.jsx)(ot.b,{condition:l,children:Object(c.jsx)("i",{className:"material-icons",onClick:function(){return d("VIDEO",o)},children:"videocam"})}),Object(c.jsx)(ot.b,{condition:!s,children:Object(c.jsx)("i",{className:"material-icons",children:"mic_off"})}),Object(c.jsx)(ot.b,{condition:s,children:Object(c.jsx)("i",{className:"material-icons",onClick:function(){return d("AUDIO",o)},children:"mic"})})]})]})})}))),va=function(e){var t;return Object(c.jsx)("li",{children:Object(c.jsxs)("a",{className:"d-flex justify-content-start",children:[Object(c.jsx)("span",{className:"material-icons",children:"person_pin"}),Object(c.jsx)("div",{className:"w-75",children:Object(c.jsxs)("strong",{children:["\xa0",(t=e.displayName,(t.length>18?t.substring(0,18-"...".length)+"...":t)+" (Me)")]})}),Object(c.jsx)("div",{className:"chat-footer",children:Object(c.jsx)("span",{className:" float-right"})})]})})},xa=ut(Object(m.b)((function(e){return{audioEnabledCount:0==Object.values(e.consumers).filter((function(e){return Boolean(e)&&"audio"===e.track.kind&&!e.locallyPaused&&!e.remotelyPaused})),videoVisibleCount:0==Object.values(e.consumers).filter((function(e){return Boolean(e)&&"video"===e.track.kind&&!e.locallyPaused&&!e.remotelyPaused}))}}),null)((function(e){var t=e.audioEnabledCount,a=e.videoVisibleCount,r=e.roomClient,n=Object(at.h)().rid,o=function(e){var t=n,a=JSON.parse(localStorage.getItem("user")).id;it.collection("meeting").where("userId","==",a).where("meetingId","==",t).get().then((function(t){0!==t.size&&r.controlOverAudioVideoByHostAll({type:e})})).catch((function(e){return console.log("Error getting documents: ",e)}))};return Object(c.jsxs)("div",{className:"list-bottom-action w-100 text-center",children:[Object(c.jsx)(ot.b,{condition:t,children:Object(c.jsx)("button",{className:"mdc-button shado-baground-nocolor radius10-font",disabled:!0,children:Object(c.jsx)("span",{className:"mdc-button__label",children:"Unmute All"})})}),Object(c.jsx)(ot.b,{condition:!t,children:Object(c.jsx)("button",{onClick:function(){return o("AUDIO")},className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",children:Object(c.jsx)("span",{className:"mdc-button__label",children:"Mute All"})})}),Object(c.jsx)(ot.b,{condition:a,children:Object(c.jsx)("button",{className:"mdc-button shado-baground-nocolor radius10-font",disabled:!0,children:Object(c.jsx)("span",{className:"mdc-button__label",children:"Start All Video"})})}),Object(c.jsx)(ot.b,{condition:!a,children:Object(c.jsx)("button",{onClick:function(){return o("VIDEO")},className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",children:Object(c.jsx)("span",{className:"mdc-button__label",children:"Stop All Video"})})})]})}))),ga=Object(m.b)((function(e){return{peers:Object.values(e.peers),me:e.me}}),null)((function(e){var t=e.peers,a=e.me,r=d.a.useState(""),n=Object(rt.a)(r,2),o=n[0],i=n[1],s=d.a.useState([]),l=Object(rt.a)(s,2),u=l[0],m=l[1];return d.a.useEffect((function(){var e=t.map((function(e){return{displayName:e.displayName,id:e.id}}));Boolean(o)?m(e.filter((function(e){return e.displayName.toLowerCase().includes(o.toLowerCase())}))):m(e)}),[t,o]),Object(c.jsx)("div",{className:"col-md-3 nopadding",children:Object(c.jsxs)("div",{className:"search-widget border-left rounded-left mon-border-4",children:[Object(c.jsx)("div",{className:"search-from-wiget",children:Object(c.jsxs)("form",{className:"form-inline d-flex justify-content-center md-form form-sm m-0",children:[Object(c.jsx)("i",{className:"fa fa-search ","aria-hidden":"true",style:{float:"left",width:"10%",color:"#fff"}}),Object(c.jsx)("input",{className:"input-wigate-serach",type:"text",style:{width:"80%",float:"right",border:"0px",color:"#fff"},placeholder:"Find a Participant","aria-label":"Search",onChange:function(e){return i(e.target.value)}})]})}),Object(c.jsx)("div",{className:"user-list",children:Object(c.jsxs)("ul",{className:"list-unstyled friend-list",children:[Object(c.jsx)(ot.b,{condition:a.displayName.toLowerCase().includes(o.toLowerCase()),children:Object(c.jsx)(va,{displayName:a.displayName},a.id)}),u.map((function(e){return Object(c.jsx)(fa,{displayName:e.displayName,id:e.id},e.id)}))]})}),Object(c.jsx)(xa,{})]})})})),Oa=ut(Object(m.b)((function(e){return{rightSideMode:e.rightSideMode}}),null)((function(e){var t=e.rightSideMode;return Object(c.jsx)("div",{id:"sliderview",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(ma,{}),Object(c.jsx)(ot.b,{condition:"chat"===t.mode,children:Object(c.jsx)(ja,{})}),Object(c.jsx)(ot.b,{condition:"list"===t.mode,children:Object(c.jsx)(ga,{})})]})})}))),ya=function(){return Object(c.jsx)("main",{children:Object(c.jsxs)("div",{id:"clearfullview",className:"container-fuid card clearfullview",children:[Object(c.jsx)(Yt,{}),Object(c.jsx)("div",{className:"col-md-12",style:{margin:"auto"},children:Object(c.jsx)(Oa,{})})]})})},Na=ut(Object(m.b)((function(e){var t=Object.values(e.peers);return{displayMode:e.displayMode,peers:t}}),null)((function(e){var t=e.displayMode,a=e.peers;return Object(c.jsxs)("main",{children:[Object(c.jsx)(ot.b,{condition:"grid"===t.mode,children:Object(c.jsx)(oa,{})}),Object(c.jsx)(ot.b,{condition:"speaker"===t.mode,children:Object(c.jsx)(ya,{})}),Object(c.jsx)(ot.b,{condition:"screen"===t.mode,children:Object(c.jsx)(Kt,{})}),a.map((function(e){return Object(c.jsx)(Qt,{id:e.id},e.id)}))]})}))),ka=function(){return Object(c.jsx)("footer",{children:Object(c.jsxs)("div",{className:"footer-copyright text-center py-3",children:["\xa9 2021 Copyright:",Object(c.jsx)("a",{onClick:function(e){return e.preventDefault()},href:"",className:"c-text",children:"Babylon Resources Ltd."})]})})},Sa=function(){var e=Object(at.f)();return Object(c.jsx)("div",{id:"unlockMeetingEndId",style:{textAlign:"center",display:"none"},children:Object(c.jsxs)("button",{className:"btn-floating btn btn-danger btn-sm shado-baground-textC",style:{height:"80px",fontSize:"18px"},onClick:function(){return e.push("/home")},children:["Meeting is closed by host ",Object(c.jsx)("br",{}),"Click here to go back"]})})},wa=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{id:"unlockMeetingBodyId",children:[Object(c.jsx)(Na,{}),Object(c.jsx)(ka,{})]}),Object(c.jsx)(Sa,{})]})},_a=Object(m.b)((function(e){return{notifications:e.notifications}}),(function(e){return{onClick:function(t){e(de(t))}}}))((function(e){var t=e.notifications;e.onClick;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)("div",{id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:ha()("toast","info"===e.type?"toast-success":"toast-error"),children:Object(c.jsx)("div",{className:"toast-message",children:e.text})})},e.id)}))})})),Pa=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Unlock World"})}),Object(c.jsx)(_a,{}),Object(c.jsx)(wa,{})]})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.roomClient,r=t.invalidMeetingMessage,n=t.roomFullMessage,o=this.props.room.url.split("/room/")[1].trim(),c=JSON.parse(localStorage.getItem("user")).id;it.collection("meeting").where("meetingId","==",o).get().then((function(t){0!==t.size?it.collection("meeting-participants").where("meetingId","==",o).where("userId","==",c).get().then((function(t){t.size<6?it.collection("meeting-participants").add({meetingId:o,userId:c}).then((function(e){a.join()})).catch((function(e){return console.error("Error adding document: ",e)})):(n(),setTimeout((function(){e.props.history.push("/")}),5e3))})).catch((function(e){return console.log("Error getting documents: ",e)})):(r(),setTimeout((function(){e.props.history.push("/")}),5e3))})).catch((function(e){return console.log("Error getting documents: ",e)}))}}]),a}(d.a.Component),Ea=ut(Object(m.b)((function(e){return{room:e.room,me:e.me,amActiveSpeaker:e.me.id===e.room.activeSpeakerId}}),(function(e){return{invalidMeetingMessage:function(){e(he({type:"error",text:"Please wait for host to start meeting"}))},roomFullMessage:function(){e(he({type:"error",text:"Room is full. (maximum 6 participants can join a room)"}))}}}))(Pa)),Ca=Object(at.i)(Ea),Ta=a(128),Ra=a.n(Ta),Da=Object(m.b)(null,(function(e){return{setMyself:function(t,a,r,n){var o;e({type:"SET_ME",payload:{peerId:(o={peerId:t,displayName:a,displayNameSet:r,device:n}).peerId,displayName:o.displayName,displayNameSet:o.displayNameSet,device:o.device}})},setUrl:function(t){return e({type:"SET_ROOM_URL",payload:{url:t}})},changeDisplayMode:function(t){e(ue(t,null))},resetTextMessage:function(){e({type:"RESET_MESSAGE"})}}}))((function(e){var t=Object(l.useState)(null),a=Object(rt.a)(t,2),r=a[0],n=a[1],o=e.setMyself,i=e.setUrl,s=e.changeDisplayMode,d=e.resetTextMessage,u=Object(at.h)().rid;return Object(l.useEffect)((function(){var e=u,t=I()({length:8}).toLowerCase(),a=JSON.parse(localStorage.getItem("user")).name,r=function(){var e=navigator.userAgent,t=Ra.a.getParser(e);return{flag:t.satisfies({chrome:">=0",chromium:">=0"})?"chrome":t.satisfies({firefox:">=0"})?"firefox":t.satisfies({safari:">=0"})?"safari":t.satisfies({opera:">=0"})?"opera":t.satisfies({"microsoft edge":">=0"})?"edge":"unknown",name:t.getBrowserName(),version:t.getBrowserVersion()}}();o(t,a,!1,r),i(window.location.href),s("grid"),d();var c=new Ne({roomId:e,peerId:t,displayName:a,device:r,handlerName:undefined,useSimulcast:!0,useSharingSimulcast:!0,forceTcp:!1,produce:!0,consume:!0,forceH264:!1,forceVP9:!1,svc:undefined,datachannel:!0,externalVideo:!1});n(c)}),[]),Object(c.jsx)(dt.Provider,{value:r,children:r&&Object(c.jsx)(Ca,{})})})),Ma=(a(266),a(267),function(){var e=Object(at.f)(),t=Object(at.g)(),a=d.a.useState(""),r=Object(rt.a)(a,2),n=r[0],o=r[1],i=d.a.useState(""),s=Object(rt.a)(i,2),l=s[0],u=s[1],m=d.a.useState("none"),p=Object(rt.a)(m,2),b=p[0],h=p[1],j=d.a.useState("password"),f=Object(rt.a)(j,2),v=f[0],x=f[1];return Object(c.jsxs)("div",{className:"container-full bg-white",children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Sign In"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsx)("div",{style:{display:b},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsx)("div",{className:"toast-message",children:"Invalid Username or Password"})})}),Object(c.jsx)("nav",{className:" navbar navbar-expand-lg navbar-light bg-white overright-nabbar  border-bottom",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("a",{className:"navbar-brand",href:"",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("img",{src:nt,style:{height:44},alt:"Logo"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(c.jsxs)("ul",{className:"nav navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item c-text ",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){return e.push("/join")},children:"Join a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link c-text ",children:"Host a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{type:"button",onClick:function(){return e.push("/signup")},className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",style:{width:"100%",padding:"1px 32px"},children:"Sign Up"})})]})})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{className:"border border-light p-5 margin col-8 col-sm-6 col-md-6  col-lg-4 mb-5",style:{marginTop:"5%",maxWidth:400},children:[Object(c.jsx)("p",{className:"h4 mb-4 text-center",children:"Sign In"}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",className:"text-left",children:"Email"}),Object(c.jsx)("input",{type:"text",id:"email",name:"email",maxLength:50,className:"form-control",onChange:function(e){return o(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group position-relative",children:[Object(c.jsx)("label",{htmlFor:"inputAddress",children:"Password"}),Object(c.jsxs)("div",{className:"position-relative",children:[Object(c.jsx)("input",{id:"password-field",type:v,className:"form-control",name:"password",onChange:function(e){return u(e.target.value)}}),Object(c.jsx)("span",{toggle:"#password-field",onClick:function(){return x("password"===v?"text":"password")},className:"fa fa-fw fa-eye field-icon toggle-password position-absolute mt-2"})]}),Object(c.jsx)("a",{href:"#",className:"forgerpass c-text",onClick:function(t){t.preventDefault(),e.push("/forgotPassword")},children:"Forgot password?"})]}),Object(c.jsxs)("div",{className:"text-center col-sm-12",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("button",{onClick:function(a){if(a.preventDefault(),!Boolean(n)||!Boolean(l))return h("block"),void setTimeout((function(){return h("none")}),3e3);it.collection("users").where("email","==",n).where("password","==",l).where("type","==","Normal").get().then((function(a){a.empty?(h("block"),setTimeout((function(){return h("none")}),3e3)):a.forEach((function(a){var r=Object(y.a)({},a.data());r.id=a.id,delete r.created,delete r.password,console.log(r),localStorage.setItem("user",JSON.stringify(r)),e.push(Boolean(t.state)?t.state.redirectPage:"/")}))})).catch((function(e){return console.log("Error getting documents: ",e)}))},className:"mdc-button mdc-button--raised shado-baground-textC mt-2 btn-lg",style:{width:"100%",marginTop:"20px 20px !important"},children:Object(c.jsxs)("span",{className:"mdc-button__label",children:[Object(c.jsx)("i",{className:"fa fa-user"})," \xa0Sign in"]})})}),Object(c.jsx)("div",{className:"row mt-5"})]})]})})]})}),Ia=a(189),Aa=a(92),La=a.n(Aa),Va=(a(160),function(){var e=Object(l.useState)(!1),t=Object(rt.a)(e,2),a=t[0],r=t[1],n=Object(l.useState)(null),o=Object(rt.a)(n,2),i=o[0],s=o[1],d=Object(at.f)(),u=Object(Ia.a)(),m=u.register,p=u.errors,b=u.watch,h=u.handleSubmit,j=Object(l.useRef)({});j.current=b("password","");var f=function(e,t){it.collection("users").where("email","==",e.email).where("type","==",e.type).get().then((function(a){0!==a.size?(r(!0),setTimeout((function(){return r(!1)}),3e3)):it.collection("users").add(Object(y.a)(Object(y.a)({},e),{},{created:new Date,password:t})).then((function(t){e.id=t.id,localStorage.setItem("user",JSON.stringify(e)),d.push("/"),console.log(e)})).catch((function(e){return console.error("Error adding document: ",e)}))})).catch((function(e){return console.log("Error getting documents: ",e)}))};return Object(c.jsxs)("div",{className:"container-full bg-white",children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Sign Up"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsx)(ot.b,{condition:0!==Object.keys(p).length,children:Object(c.jsx)("div",{id:"toast-container",className:"toast-top-right",style:{top:"97px"},"aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsxs)("div",{className:"toast-message",children:[p.firstName&&Object(c.jsx)("div",{children:p.firstName.message}),p.email&&Object(c.jsx)("div",{children:p.email.message}),p.password&&Object(c.jsx)("div",{children:p.password.message}),p.confirmPassword&&Object(c.jsx)("div",{children:p.confirmPassword.message})]})})})}),Object(c.jsx)(ot.b,{condition:a,children:Object(c.jsx)("div",{id:"toast-container",className:"toast-top-right",style:{top:"97px"},"aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsx)("div",{className:"toast-message",children:"Email Already Exists"})})})}),Object(c.jsx)("nav",{className:" navbar navbar-expand-lg navbar-light bg-white overright-nabbar  border-bottom",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("a",{className:"navbar-brand",href:"",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("img",{src:nt,style:{height:44},alt:"logo"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(c.jsxs)("ul",{className:"nav navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item c-text ",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){return d.push("/join")},children:"Join a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link c-text ",href:"#",children:"Host a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{type:"button",onClick:function(){return d.push("/signin")},className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",style:{width:"100%",padding:"1px 32px"},children:"Sign In"})})]})})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{className:"border border-light p-5 margin col-8 col-sm-6 col-md-6  col-lg-4 mb-5",style:{marginTop:"5%"},onSubmit:h((function(e){var t={email:e.email,name:e.firstName.concat(" ",e.lastName),photo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAIAAABs0KxXAAAAA3NCSVQICAjb4U/gAAAAl3pUWHRSYXcgcHJvZmlsZSB0eXBlIEFQUDEAABiVVY5RCsQwCET/c4oeYdTEJMcJJV0Ky7b0/h+bNHa7fYIjI4y6V/3UY52n/diW9V3d1CFKzmefuQBIGDAgBOqKaJYO1ZwifBvI/IoHPurSKuqs4TSktzxyPMwSbtUyythb1k9Dwf+NcP11wbbjOzOwZEnmPW+RjCdO3BdH2DYTyjfH2QAADA5JREFUeJztmntQU1cex3/3kcdNkBggQEBEEsMryKo44PqqOritWp0KqBR1Zh0VZlCwVUe3Bd21O5Zlinasrfho1dWWqlhWfC219Vm1uiKoCIggyAgpIQmBEpKb3MfZP67Npih29p/tbJPP5I9zT375/c73d+79nXOSYAgh8ErwX3sAvxo+5d6HT7n34VPuffiUex8+5d6HT7n34VPuffiUex8+5d6HT7n34VPuffiUex8+5d6HT7n3QQIAy/NW2oVh2BA2CMewAKnkfzAahNDQw/iFd/9byOb+gWk36/o5bkjdADRAQWjQ1rExz7+bk5Pz4MEDDMOEYclksuXLl7/55ptugytXrqxbt04ul+M4fuLEiaCgIACw2+1Lliwxm808zwMAhmERERH5+flxcXHJycn+/v7r1693O9m7d++nn37K8/zFixc3btx44cKFioqKxMREd4j+/v7NmzdXV1cTBCH8KI4QWrhwYX5+fltb2/z585VKpVwuP3r0qEKhoGl60aJFFosF/6LlaZeLQQASAPGLXhQAh9B7HcaWH23PKzebzVarVa1W63S6gIAAg8GQlZXV2trqNigqKnI4HH19fS0tLefOnXP3m0ymnp4enU6n0WikUumdO3fy8/MVCkVJSUlbW1tWVlZHRwcAtLS0rF69urW1taSkRKFQmEymx48fMwzjOYaysrKysjKLxWIymWw2W3d3d09Pz9q1ax88eIAQevjwoc1ma2hoOHTokJAUi8ViNpvh3TsNUHnpQNOTHtppdLqMDGt00EYXa6RdRgfd7aC77I6RX9+A01fqe/rQc2RkZISHhzc3NwuXOTk5AFBXVydcNjY2AsCcOXO+/PLLkSNHzp07l2VZhNDAwMDUqVMjIiLcfgBgwoQJNpsNIVRQUBAREZGRkcEwTHp6ulqtLi4uFszS09MBoLq62nMMRUVFUVFReXl5PT09dru9q6srLS1NqVRevXq1ra1NJpPNmDFjzJgxISEh3d3dTqdzypQpcXFx+PqE0RPkFIXjSok42GQKrvo6WCoJbroUbDcFSyUqqSSEkj4rg0M8DxRFXb169fz58ydPnmxsbAwLCwsODnbfqEFBQWlpaZmZmWaz+caNG0IuhDtcLBafPXu2qqrqyJEjKpVKq9VKpVIAKCwsHD169N27dzMzM+/duzd+/Pj169e/OPZPrmiaHjdunFKppCgqJCQkNjbWZrMJRcFut48bN2727NkkSZaWlorFYqEfr3z89HhywthABQBwf/0bO28uunMTds+CikLBL4eQS2gN8bcSuVz+zjvvvPrqqwsWLGhvb1+2bFlAQAAAPH369NixY2FhYXPmzAGATZs2+fn5HT161P1BPz+/119/ffbs2dnZ2SqVat68eQRBAIBUKj1y5Eh/f39zczOO4wcPHhT6XwJCSCgZAp5tAHA6nW+99RaO49u2bWtqahKLxQCAPxqgk76/R4lIACDW5aPDX2DjJsIfj8OcPwEAx6P1tQ8NLKsmiRFy6oVRe3t7KyoqTCZTZ2fn9OnTP/744/379wNARUWFXC5nGCYtLW3ChAmVlZWBgYH79u2jaVqoiFartbOz02g01tXVDRs2bOnSpfX19YLP8PDwvLw8s9mcm5urUqkGRXxhIjw73aVOgGEYtVqdnZ2tVqt37twpTDspwjEr7bpltET6yfaFWrf9gakBR2DyQgCgWS7r5r1/9NmA5XaNjfUXi4ZKOUEQJElyHEeSZEhIiN1u5zju8OHDDMMsW7YsKCiI53kcx48fP97V1fXtt9++9tprAIBhmEgkIghCGChBEE6n0+2ToiiGYUSiwUFVKlVtba0Qguf5mJgYDMMoiqqpqcnIyJDJZFartaGhwc/Pzy1eaGRnZ+/fv//69etisRjHcRIAAMMIDAMAF+fspK2I5wGHHxzO8d/VdjEMAHYhZczM0KAXana5XCRJpqWl2Ww2kUjk7+//5MmTUaNGVVZW3r17V6vVbtmyxVNMbm7uJ598kpqa6nQ6RSJRTEwMx3EEQahUKo7jFAqF50SZTCaO4zzDOZ1OhUKxadMmq9UKACzL7tmzJzo62mAwVFZWlpaWsiwrlUrVanVvb294eLjwcWEtCA4Ofvvtt4uLiwMCAgYGBkhPv2uUU3KUk0SAA8CWuuYuhhklIs+njNEp/Iaa7VmzZiUmJuL4T0UQw3Q6XXp6+vbt2zdu3Dht2jRP4/nz5zc3NwOA2Wx+4403HA6He2dCkuTEiRO1Wq3bWK/Xb9iwwbMHAGbOnDl27FghHIZhLpdLq9WmpqYeOHCgqanJbUYQREpKikajMRgM69ati4uLE/pzcnI6Ojr8/PxYloXNdxrg1OUTj58OWq4Kaxvh9BX457VT7T88v5j9Bhi8b+8YsGd+V+PiuPfGxi4OGg4sN/9e0476lqHmPCsrKy4uTq/X6/V6jUazY8cOADhz5oxGo0lISNDr9TqdbvHixQDwwQcfaDQawVKpVH7zzTcAsHfv3uTk5Pj4+Li4uEmTJpWXlwPArl277t+/7w7R2NhYVFTkcrncgeLj4+Pj46uqqgDg4sWLMTExer0+ISEhPDz8s88+6+vrU6lUCQkJ8fHxer0ew7D+/v4LFy64ezQazfvvv/+zOW/p7d/d0AqnLpe3PDUOOBBC2+41wekrcPrKqn89cHLc85lLTU3t6+tzOp00TbMsu2LFivb29vLy8kOHDnEcR9M0TdMulwshBAA0TQuWNE0jhFpbW+fOnWu3251Op9PptNlsoaGhDoejpKSkpqbGHaKurq6goMButy9fvpxlWcGJxWLJzMxECG3YsOH27dsMwwhueZ43GAxr1qxxR3c4HAih7Ozs+vp6txnDMD97zj9v6/xLhxFIYmH942OAFmkj3k2M1vrJMutb93dbuq7f/XtyglIiHjTtFEW5K3BYWFh/fz8AyGQyHMclkv+cc6RSqeclAAwMDKSkpFDUs8VSLBa/8sorwprnaYZhmPBgEz8BAAEBAQqFgmVZiqICAwNJkiTJZ1oQQkL19gwnEomGDx/uafYz5YW/i54eEjD9Vl3LjOQof7nQuVgzIsLfb/Kt+6d/tCVerr42ZVykx8KO47iQaSGk0WiMjIxsamq6dOkSjuMsy/I8r1arp0+fTtP0mTNnKIriOC4yMlJYjQaVbp7nX3IaE5Yxl8uF47jRaJTJZCRJ8jw/aN+C43hdXd1XX30l7JTlcvm8efMQQqdOnYqOjuY4zt/fPyUl5ZlyHMMAgMCw3wcHlifFaz2KOYfQQ0tv69Skhbcf3KFdoy5Xf5cUPyU08FnmSHLr1q3CPJhMJqPRKJfLhXjCnAhtAKiurq6trcVxHMfx7du3r169OibmBYe/ocBx/NatWwUFBRzHYRh2//79lJSUoYwlEokQHQCEHVtBQcG5c+fa2toIgjh79uzJkydJBAAY1jJgv2vuZRHCAKJl0mqT1e0FAVrx+GnujwMVExNX1TSe77NNvVP/eWzUEm0EADAMU1xc7N4/5eXldXV18Tw/fvz41NRUz9EkJSUlJSUJ7ZiYmMuXL8fGxg7ajeE4LlQEz5kXNnw8z0+ePLmoqEjodDqdq1atAo9nwQ3P8zqdblD0sLCwlStXCu2+vr61a9eSchEJABvbu6DN8OIEYhjg+O4fzAXxmqqp43Nu1e3v7lna0PrQTv91jI7nOJZl3QKEIwf6pX+OGwwGiUQibLw8+2/evCmRSHiet9vt7k673S4kQphDdzqEx9jhcFgslqioqJdH9MRkMrEsS+bGRjUPOL6300OdCRCAGODP2hFhcgoA9qWM0Te27uw07ekyIwyP1Gg85ycoKIggiMDAwM2bN3/44YfCcBMSEg4ePBgbG6tUKgGA5/kRI0Z89NFH4eHhM2bMmDRpkpApnucLCwspilqwYMHKlSuFfQ5CaNiwYbt370YIqdVqz4GFhoYihJYsWZKXlyfUC+Fbh9zc3GvXrrndtre3P3r0qLS0tKysTCqVIoREIlFRURH2LOpLk4Q9d0LlADAAflCF/L8C+8U787eK93736lPuffiUex8+5d6HT7n34VPuffiUex8+5d6HT7n34VPuffiUex8+5d6HT7n34VPuffiUex8+5d6H9yr/Nybn2maCx/JSAAAAAElFTkSuQmCC",type:"Normal",dob:i};f(t,e.password)})),children:[Object(c.jsx)("p",{className:"h4 mb-4 text-center",children:"Sign Up"}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"inputFastName",children:"First Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"inputFastName",placeholder:"First Name",name:"firstName",ref:m({required:{value:!0,message:"First Name Required"}})})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"inputLastName",children:"Last Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"lastName",id:"inputLastName",placeholder:"Last Name",ref:m})]})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"inputEmail4",children:"Email Address"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"inputEmail4",placeholder:"demo@gmail.com",name:"email",ref:m({required:{value:!0,message:"Email Required"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Entered value does not match email format"}})})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"inputDateofbirth",children:"Date of Birth"}),Object(c.jsx)(La.a,{showMonthDropdown:!0,showYearDropdown:!0,isClearable:!0,dropdownMode:"select",className:"form-control",placeholderText:"dd/mm/yyyy",maxDate:new Date,dateFormat:"dd/MM/yyyy",selected:i,onChange:function(e){return s(e)}})]})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"Password",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"Password",name:"password",placeholder:"********",ref:m({required:{value:!0,message:"Password Required"},minLength:{value:4,message:"Password too Short"}})})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"confirm_password",children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"confirm_password",placeholder:"*******",name:"confirmPassword",ref:m({required:{value:!0,message:"Confirm Password Required"},validate:{validate:function(e){return e===j.current||"The passwords do not match"}}})})]})]}),Object(c.jsxs)("div",{className:"text-center col-sm-12",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("button",{type:"submit",className:"mdc-button mdc-button--raised shado-baground-textC mt-2 btn-lg",style:{width:"100%",marginTop:"20px 20px !important"},children:Object(c.jsx)("span",{className:"mdc-button__label",children:"Sign Up"})})}),Object(c.jsx)("div",{className:"custom-control custom-checkbox mb-5",children:Object(c.jsxs)("label",{children:["Already have an account?\xa0",Object(c.jsx)("a",{onClick:function(){return d.push("/signin")},className:"c-text",children:"Sign in"})]})}),Object(c.jsxs)("p",{className:"mt-5",children:["By signing in, I agree to the",Object(c.jsx)("a",{href:"https://unlockworld.net/terms-conditions/",className:"c-text",children:" Privacy Policy"})," and",Object(c.jsx)("a",{href:"https://unlockworld.net/privacy-policy/",className:"c-text",children:" Terms of Service"})]})]})]})})]})}),qa=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).mySubmitHandler=function(e){e.preventDefault();var t=r.state.roomId;if(!Boolean(t))return r.setState({error:"block"}),void setTimeout((function(){r.setState({error:"none"})}),3e3);r.props.history.push("/room/"+t)},r.myChangeHandler=function(e){r.setState(Object(Pe.a)({},e.target.name,e.target.value))},r.homePage=function(){return r.props.history.push("/")},r.state={roomId:null,error:"none"},r}return Object(j.a)(a,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"container-full bg-white",style:{height:"100vh"},children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Join"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsx)("div",{style:{display:this.state.error},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsx)("div",{className:"toast-message",children:"Please Enter Meeting ID"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{className:"border border-light p-5 margin col-md-4",style:{marginTop:"10%"},onSubmit:this.mySubmitHandler,children:[Object(c.jsx)("p",{className:"h4 mb-4 text-center",children:Object(c.jsx)("img",{style:{width:"35%"},src:nt})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"meetingid",children:"Enter Meeting ID"}),Object(c.jsx)("input",{type:"text",id:"meetingid",name:"roomId",onChange:this.myChangeHandler,value:this.state.roomId||"",className:"form-control mb-6 border4-light"})]}),Object(c.jsx)("div",{className:"text-center col-sm-12 mb-5",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("button",{type:"submit",className:"mdc-button mdc-button--raised shado-baground-textC mt-2 btn-lg",style:{width:"100%"},children:Object(c.jsxs)("span",{className:"mdc-button__label",children:[Object(c.jsx)("i",{className:"fa fa-users"})," Join"]})})})}),Object(c.jsx)("i",{onClick:this.homePage,className:"material-icons",children:"arrow_back"})]})})]})}}]),a}(l.Component),Fa=Object(at.i)(qa),Ha=a(193),Wa=function(e){var t=e.component,a=Object(Ha.a)(e,["component"]);return Object(c.jsx)(at.b,Object(y.a)(Object(y.a)({},a),{},{render:function(e){return null==JSON.parse(localStorage.getItem("user"))?Object(c.jsx)(at.a,{to:{pathname:"/signin",state:{redirectPage:e.location.pathname}}}):Object(c.jsx)(t,Object(y.a)({},e))}}))},Ua=function(e){Object(pt.a)(a,e);var t=Object(bt.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).mySubmitHandler=function(e){e.preventDefault();var t=r.state.email;if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t))return r.setState({error:"block"}),void setTimeout((function(){r.setState({error:"none"})}),3e3);it.collection("users").where("email","==",t).where("type","==","Normal").get().then((function(e){e.empty?(r.setState({error:"block"}),setTimeout((function(){r.setState({error:"none"})}),3e3)):e.forEach((function(e){var t=Object(y.a)({},e.data()),a="https://meeting.unlockworld.net/forgotPasswordMail/?email="+encodeURIComponent(t.email)+"&password="+encodeURIComponent(t.password)+"&name="+encodeURIComponent(t.name);r.setState({success:"block"}),fetch(a).then((function(e){return e.json()})).then((function(e){r.setState({success:"none"}),r.props.history.push("/signin")}))}))})).catch((function(e){return console.log("Error getting documents: ",e)}))},r.myChangeHandler=function(e){return r.setState(Object(Pe.a)({},e.target.name,e.target.value))},r.homePage=function(){return r.props.history.push("/")},r.state={email:null,error:"none",success:"none"},r}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:"container-full bg-white",style:{height:"100vh"},children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Forgot Password"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsx)("div",{style:{display:this.state.error},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsx)("div",{className:"toast-message",children:"Invalid email or does not exist"})})}),Object(c.jsx)("div",{style:{display:this.state.success},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-success",children:Object(c.jsx)("div",{className:"toast-message",children:"Your password has been sent to your email"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{className:"border border-light p-5 margin col-md-4",style:{marginTop:"10%"},onSubmit:this.mySubmitHandler,children:[Object(c.jsx)("p",{className:"h4 mb-4 text-center",children:Object(c.jsx)("img",{style:{width:"35%"},src:nt,alt:"Image",onClick:function(){e.props.history.push("/")}})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"meetingid",children:"Enter Email/Username"}),Object(c.jsx)("input",{type:"text",id:"meetingid",name:"email",onChange:this.myChangeHandler,value:this.state.email||"",className:"form-control mb-6 border4-light"})]}),Object(c.jsx)("div",{className:"text-center col-sm-12 mb-5",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("button",{type:"submit",className:"mdc-button mdc-button--raised shado-baground-textC mt-2 btn-lg",style:{width:"100%"},children:Object(c.jsxs)("span",{className:"mdc-button__label",children:[Object(c.jsx)("i",{className:"fa fa-envelope"})," Retrieve Password"]})})})}),Object(c.jsx)("i",{onClick:this.homePage,className:"material-icons",children:"arrow_back"})]})})]})}}]),a}(l.Component),Ba=Object(at.i)(Ua),za=a(139),Ya=(a(353),a(354),function(){var e=Object(at.f)(),t=Object(l.useState)({}),a=Object(rt.a)(t,2),r=a[0],n=a[1],o=d.a.useState("none"),i=Object(rt.a)(o,2),s=i[0],u=i[1],m=d.a.useState("none"),p=Object(rt.a)(m,2),b=p[0],h=p[1],j=Object(l.useState)(""),f=Object(rt.a)(j,2),v=f[0],x=f[1],g=Object(l.useState)(""),O=Object(rt.a)(g,2),N=O[0],k=O[1],S=Object(l.useState)(new Date),w=Object(rt.a)(S,2),_=w[0],P=w[1],E=Object(l.useState)(new Date),C=Object(rt.a)(E,2),T=C[0],R=C[1],D=Object(l.useState)(null),M=Object(rt.a)(D,2),A=M[0],L=M[1],V=d.a.useState([]),q=Object(rt.a)(V,2),F=q[0],H=q[1],W=d.a.useState(new Date(1900,0,1).getTime()),U=Object(rt.a)(W,2),B=U[0],z=U[1],Y=d.a.useState(new Date(2100,0,1).getTime()),K=Object(rt.a)(Y,2),G=K[0],J=K[1],X=d.a.useState([]),Q=Object(rt.a)(X,2),Z=Q[0],$=Q[1],ee=d.a.useState(new Date(1900,0,1).getTime()),te=Object(rt.a)(ee,2),ae=te[0],re=te[1],ne=d.a.useState(new Date(2100,0,1).getTime()),oe=Object(rt.a)(ne,2),ce=oe[0],ie=oe[1],se=d.a.useState(new Date),le=Object(rt.a)(se,2),de=le[0],ue=le[1],me=d.a.useState(!0),pe=Object(rt.a)(me,2),be=pe[0],he=pe[1],je=d.a.useState(!0),fe=Object(rt.a)(je,2),ve=fe[0],xe=fe[1];d.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("user"));n(e)}),[]),d.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("user")).id,t=[];it.collection("schedule").where("status","==","CREATED").where("userId","==",e).get().then((function(e){return e.forEach((function(e){return t.push(Object(y.a)(Object(y.a)({},e.data()),{},{sid:e.id}))}))})).then((function(){var e=t.filter((function(e){return e.scheduleAt.toDate().getTime()>B&&e.scheduleAt.toDate().getTime()<G})).sort((function(e,t){return e.scheduleAt>t.scheduleAt?1:-1}));H(e),he(!1)})).catch((function(e){return console.log("Error getting documents: ",e)}));var a=[];it.collection("schedule").where("status","==","STARTED").where("userId","==",e).get().then((function(e){return e.forEach((function(e){return a.push(Object(y.a)(Object(y.a)({},e.data()),{},{sid:e.id}))}))})).then((function(){var e=a.filter((function(e){return e.scheduleAt.toDate().getTime()>ae&&e.scheduleAt.toDate().getTime()<ce})).sort((function(e,t){return e.scheduleAt>t.scheduleAt?1:-1}));$(e),xe(!1)})).catch((function(e){return console.log("Error getting documents: ",e)}))}),[de,B,G,ae,ce]);var ge=function(){return e.push("/")},Oe=function(e){var t=e.topic,a=e.scheduleAt,r=e.meetingId,n=a.toDate().toLocaleString("default",{weekday:"long"})+", "+a.toDate().toLocaleString("default",{month:"long"})+" "+a.toDate().getDate()+", "+a.toDate().getHours()+":",o="Unlock World\nMake Your Life Easier with Unlock!\nhttps://meeting.unlockworld.net/room/"+r+"\nRoom ID: "+r+"\n\nTopic: "+t+"\nTime: "+(n+=a.toDate().getMinutes()<10?"00":a.toDate().getMinutes());xt()(o).then((function(){h("block"),setTimeout((function(){return h("none")}),3e3)}))},ye=function(e){return he(!0),xe(!0),it.collection("schedule").doc(e).delete().then((function(){return ue(new Date)})).catch((function(e){return console.error("Error removing document: ",e)}))},Ne=function(e){var t=e.topic,a=e.meetingId,r=e.scheduleAt,n=e.sid;x(t),k(a),P(r.toDate()),R(r.toDate()),L(n)},ke=function(t){var a=t.meetingId,n=t.sid;it.collection("schedule").doc(n).update({status:"STARTED"}).catch((function(e){return console.error("Error adding document: ",e)})),it.collection("meeting").add({meetingId:a,userId:r.id,created:new Date}).then((function(t){return e.push("/room/"+a)})).catch((function(e){return console.error("Error adding document: ",e)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"container-full bg-white",children:[Object(c.jsx)(ct.a,{children:Object(c.jsx)("title",{children:"Schedule"})}),Object(c.jsx)("header",{className:"MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary MuiPaper-elevation4",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 115, 107), rgb(255, 34, 96))",height:25},children:Object(c.jsx)("div",{className:"MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"})}),Object(c.jsx)("div",{style:{display:s},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-error",children:Object(c.jsx)("div",{className:"toast-message",children:"Failed to create a schedule"})})}),Object(c.jsx)("div",{style:{display:b},id:"toast-container",className:"toast-top-right","aria-live":"polite",role:"alert",children:Object(c.jsx)("div",{className:"toast toast-success",children:Object(c.jsx)("div",{className:"toast-message",children:"Invitation copied to the clipboard"})})}),Object(c.jsxs)("nav",{className:" navbar navbar-expand-lg navbar-light bg-white overright-nabbar  border-bottom",children:[Object(c.jsx)("a",{className:"navbar-brand",href:"",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("img",{src:nt,style:{height:44}})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(c.jsxs)("ul",{className:"nav navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item c-text ",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){return e.push("/join")},children:"Join a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link c-text ",onClick:function(){var t=I()({length:8}).toLowerCase();it.collection("meeting").add({meetingId:t,userId:r.id,created:new Date}).then((function(a){e.push("/room/"+t)})).catch((function(e){return console.error("Error adding document: ",e)}))},children:"Host a Meeting"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("button",{className:"mdc-button mdc-button--raised shado-baground-textC radius10-font",style:{width:"100%",padding:"1px 32px"},onClick:function(){localStorage.removeItem("user"),e.push("/signin")},children:"Logout"})})]})})]}),Object(c.jsx)("a",{className:"d-sm-block d-md-none ",style:{position:"absolute",zIndex:999999,WebkitFontSmoothing:"subpixel-antialiased",backgroundColor:"#f7023e",borderRadius:"49px 0 0 49px",padding:"1px   9px",color:"#fff",top:"18%",right:0},children:Object(c.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("nav",{id:"sidebar",className:"col-md-2 d-none d-md-block bg-common sidebar mobile-absolute",children:Object(c.jsx)("div",{className:"sidebar-sticky",children:Object(c.jsxs)("ul",{className:"nav flex-column",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link",href:"#",onClick:function(e){e.preventDefault(),ge()},children:" Profile"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link active",href:"#",onClick:function(t){t.preventDefault(),e.push("/schedule")},children:"Meetings"})})]})})}),Object(c.jsxs)("main",{role:"main",className:"col-md-8 col-lg-9 px-4 pt-5",children:[Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("h2",{children:"Meetings"})})}),Object(c.jsx)(gt.a,{renderChildren:!0,tag:"div",blocking:be&&ve,loader:Object(c.jsx)(Ot.Loader,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},active:!0,type:"semi-circle-spin",color:"#FF5549"}),children:Object(c.jsxs)("div",{className:"container border p-4",children:[Object(c.jsx)("nav",{children:Object(c.jsxs)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[Object(c.jsx)("a",{className:"nav-item nav-link active",id:"nav-home-tab","data-toggle":"tab",href:"#nav-home",role:"tab","aria-controls":"nav-home","aria-selected":"true",children:"Upcoming"}),Object(c.jsx)("a",{className:"nav-item nav-link",id:"nav-profile-tab","data-toggle":"tab",href:"#nav-profile",role:"tab","aria-controls":"nav-profile","aria-selected":"false",children:"Previous"}),Object(c.jsx)("a",{className:"nav-item nav-link",id:"nav-contact-tab","data-toggle":"tab",href:"#nav-contact",role:"tab","aria-controls":"nav-contact","aria-selected":"false",children:"Personal Room"})]})}),Object(c.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[Object(c.jsxs)("div",{className:"tab-pane fade show pt-4 active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab",children:[Object(c.jsxs)("div",{className:"d-flex mb-5",children:[Object(c.jsx)("div",{className:"mr-auto pt-2",children:Object(c.jsx)(za.RangeDatePicker,{onChange:function(e,t){Boolean(e)?z(e.getTime()):z(new Date(1900,0,1).getTime()),Boolean(t)?(t.setDate(t.getDate()+1),J(t.getTime())):J(new Date(2100,0,1).getTime())},minDate:new Date(1900,0,1),maxDate:new Date(2100,0,1),monthFormat:"MMM YYYY",startDatePlaceholder:"Start Time",endDatePlaceholder:"End Time",disabled:!1,className:"schedule-date-form",startWeekDay:"sunday",highlightToday:!0})}),Object(c.jsx)("div",{className:"pb-2",children:Object(c.jsx)("button",{onClick:function(){return function(){x("My Meeting"),k(I()({length:9}).toLowerCase()),P(new Date),L(null);var e=new Date,t=e.getMinutes(),a=t%15;e.setMinutes(t+15-a),R(e)}()},className:"mdc-button mdc-button--raised shado-baground-textC radius10-font","data-toggle":"modal","data-target":"#exampleModal",children:"Schedule a Meeting"})})]}),F.map((function(e,t){return Object(c.jsxs)("div",{className:"d-flex meeting-schdule mb-20",children:[Object(c.jsxs)("div",{className:"col-sm-3 border p-3",children:[e.scheduleAt.toDate().toLocaleString("default",{weekday:"long"}),",\xa0",e.scheduleAt.toDate().toLocaleString("default",{month:"long"}),"\xa0",e.scheduleAt.toDate().getDate(),Object(c.jsxs)("h4",{children:[e.scheduleAt.toDate().getHours(),":",e.scheduleAt.toDate().getMinutes()<10?"00":e.scheduleAt.toDate().getMinutes()]})]}),Object(c.jsxs)("div",{className:ha()("col-sm-6 border p-3",t%2===0?"text-danger":""),children:[Object(c.jsx)("h4",{className:ha()(t%2===0?"text-danger":""),children:e.topic}),Object(c.jsxs)("p",{children:["Meeting ID: ",e.meetingId]})]}),Object(c.jsxs)("div",{className:"col-sm-3 border p-3",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return Oe(e)},className:"btn btn-sm btn-outline-primary act",children:"Copy Invitation"}),Object(c.jsx)("button",{type:"button",onClick:function(){return ke(e)},className:"btn btn-sm btn-outline-primary",children:"Start"}),Object(c.jsx)("button",{type:"button",onClick:function(){return Ne(e)},"data-toggle":"modal","data-target":"#exampleModal",className:"btn btn-sm btn-outline-primary",children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return ye(e.sid)},className:"btn btn-sm btn-outline-primary",children:"Delete"}),Object(c.jsxs)("p",{className:"small label mb-0",children:[Object(c.jsx)("i",{className:"fa fa-wpforms"}),"\xa0\xa0 Report to Unlock"]})]})]},t)})),Object(c.jsx)(ot.b,{condition:0===F.length,children:Object(c.jsxs)("div",{className:"col-12 text-center label ",style:{paddingTop:"20%",marginBottom:"20%"},children:["The user does not have any upcoming meetings,",Object(c.jsx)("br",{}),"To schedule a new meeting click Schedule a Meeting."]})})]}),Object(c.jsxs)("div",{className:"tab-pane fade pt-4 ",id:"nav-profile",role:"tabpanel","aria-labelledby":"nav-profile-tab",children:[Object(c.jsxs)("div",{className:"d-flex mb-5",children:[Object(c.jsx)("div",{className:"mr-auto pt-2",children:Object(c.jsx)(za.RangeDatePicker,{onChange:function(e,t){Boolean(e)?re(e.getTime()):re(new Date(1900,0,1).getTime()),Boolean(t)?(t.setDate(t.getDate()+1),ie(t.getTime())):ie(new Date(2100,0,1).getTime())},minDate:new Date(1900,0,1),maxDate:new Date(2100,0,1),monthFormat:"MMM YYYY",startDatePlaceholder:"Start Time",endDatePlaceholder:"End Time",disabled:!1,className:"schedule-date-form",startWeekDay:"sunday",highlightToday:!0})}),Object(c.jsx)("div",{className:"pb-2"})]}),Z.map((function(e,t){return Object(c.jsxs)("div",{className:"d-flex meeting-schdule mb-20",children:[Object(c.jsxs)("div",{className:"col-sm-3 border p-3",children:[e.scheduleAt.toDate().toLocaleString("default",{weekday:"long"}),",\xa0",e.scheduleAt.toDate().toLocaleString("default",{month:"long"}),"\xa0",e.scheduleAt.toDate().getDate(),Object(c.jsxs)("h4",{children:[e.scheduleAt.toDate().getHours(),":",e.scheduleAt.toDate().getMinutes()<10?"00":e.scheduleAt.toDate().getMinutes()]})]}),Object(c.jsxs)("div",{className:ha()("col-sm-6 border p-3",t%2===0?"text-danger":""),children:[Object(c.jsx)("h4",{className:ha()(t%2===0?"text-danger":""),children:e.topic}),Object(c.jsxs)("p",{children:["Meeting ID: ",e.meetingId]})]}),Object(c.jsxs)("div",{className:"col-sm-3 border p-3",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return Oe(e)},className:"btn btn-sm btn-outline-primary act",children:"Copy Invitation"}),Object(c.jsx)("button",{type:"button",onClick:function(){return ke(e)},disabled:"STARTED"===e.status,className:"btn btn-sm btn-outline-primary",children:"Start"}),Object(c.jsx)("button",{type:"button",onClick:function(){return Ne(e)},"data-toggle":"modal","data-target":"#exampleModal",disabled:"STARTED"===e.status,className:"btn btn-sm btn-outline-primary",children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return ye(e.sid)},className:"btn btn-sm btn-outline-primary",children:"Delete"}),Object(c.jsxs)("p",{className:"small label mb-0",children:[Object(c.jsx)("i",{className:"fa fa-wpforms"}),"\xa0\xa0 Report to Unlock"]})]})]},t)}))]}),Object(c.jsx)("div",{className:"tab-pane fade pt-4 ",id:"nav-contact",role:"tabpanel","aria-labelledby":"nav-contact-tab",children:Object(c.jsxs)("div",{style:{height:"60vh"},children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-3",children:"Topic"}),Object(c.jsxs)("div",{className:"col-9",children:[r.name,"\u2019s Personal Meeting Room"]})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-3",children:"Meeting ID"}),Object(c.jsx)("div",{className:"col-9",children:r.id})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-3",children:"Email"}),Object(c.jsx)("div",{className:"col-9",children:r.email})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-3",children:"Join URL:"}),Object(c.jsx)("div",{className:"col-9",children:"https://meeting.unlockworld.net/room/"+r.id})]}),Object(c.jsx)("div",{className:"row pt-5 ",id:"personeal-sec1",style:{display:"none"},children:Object(c.jsx)("form",{children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Topic"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Topic"}),Object(c.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]})]}),Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Meeting ID"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Display Name"}),Object(c.jsx)("div",{className:"invalid-feedback",children:" Please provide a valid city."})]})]}),Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Security Code"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Full Name"}),Object(c.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]})]}),Object(c.jsxs)("div",{className:"form-group col-6",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Join URL"})}),Object(c.jsxs)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Display Name"}),Object(c.jsx)("div",{className:"invalid-feedback",children:" Please provide a valid city."})]})]}),Object(c.jsxs)("div",{className:"form-group col-12 pl-4 m-2",children:[Object(c.jsx)("button",{type:"button",className:"btn shado-baground-textS btn-md",children:"Savs change"}),Object(c.jsx)("button",{type:"button",className:"btn shado-baground-textC btn-md",children:"Cancel"})]})]})})}),Object(c.jsxs)("div",{className:"mt-5",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return function(){var t=r.id;it.collection("meeting").add({meetingId:t,userId:r.id,created:new Date}).then((function(a){e.push("/room/"+t)})).catch((function(e){return console.error("Error adding document: ",e)}))}()},className:"btn shado-baground-textS btn-md",children:"Start"}),Object(c.jsxs)("button",{type:"button",onClick:function(){return function(e){var t="Unlock World\nMake Your Life Easier with Unlock!\nhttps://meeting.unlockworld.net/room/"+e+"\nRoom ID: "+e+"\n\nTopic: "+r.name+"\u2019s Personal Meeting Room\nTime: "+new Date;xt()(t).then((function(){h("block"),setTimeout((function(){return h("none")}),3e3)}))}(r.id)},className:"btn btn-outline-secondary btn-md gray-button",children:[Object(c.jsx)("i",{className:"fa fa-files-o"}),"\xa0\xa0\xa0\xa0 Copy the invitation"]}),Object(c.jsx)("button",{type:"button",onClick:function(){return ge()},className:"btn shado-baground-textC btn-md",children:"Cancel"})]})]})})]})]})})]})]})]}),Object(c.jsx)("div",{className:"modal fade bd-example-modal-lg",id:"exampleModal",tabIndex:-1,"data-backdrop":"static","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsx)("div",{className:"modal-header",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 34, 96), rgb(255, 115, 107))",color:"#fff",paddingBottom:20},children:Object(c.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Schedule Meeting"})}),Object(c.jsx)("div",{id:"daynamicbody",className:"modal-body",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"row pt-3 ",id:"personeal-sec1",children:Object(c.jsx)("form",{id:"add-schdule",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group col-12",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Topic"})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:0},children:Object(c.jsx)("input",{type:"text",value:v,onChange:function(e){return x(e.target.value)},className:"form-control",placeholder:"My Meeting"})})]}),Object(c.jsxs)("div",{className:"form-group col-8",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"When"})}),Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-7 form-group",style:{margin:0},children:Object(c.jsx)(La.a,{className:"form-control",placeholderText:"Date",dateFormat:"dd/MM/yyyy",minDate:new Date,selected:_,onChange:function(e){return P(e)}})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-5 form-group",style:{margin:0},children:Object(c.jsx)(La.a,{className:"form-control",placeholderText:"Time",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa",selected:T,onChange:function(e){return R(e)}})})]})})]}),Object(c.jsxs)("div",{className:"form-group col-4",children:[Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)("label",{className:"form-control-static detail-label",children:"Meeting ID"})}),Object(c.jsx)("div",{id:"display-name-form-group",className:"col-sm-12 form-group",style:{margin:"3px"},children:N})]})]})})})})})}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("hr",{}),Object(c.jsx)("button",{type:"button","data-dismiss":"modal",className:"mdc-button mdc-button--raised shado-baground-textC mt-2",onClick:function(){return function(){if(!Boolean(v)||!Boolean(_)||!Boolean(T))return u("block"),void setTimeout((function(){return u("none")}),3e3);he(!0),xe(!0);var e=new Date(_);e.setHours(T.getHours()),e.setMinutes(T.getMinutes());var t={topic:v,scheduleAt:e,meetingId:N,userId:r.id,status:"CREATED"};Boolean(A)?it.collection("schedule").doc(A).update(t).then((function(e){return ue(new Date)})).catch((function(e){return console.error("Error adding document: ",e)})):it.collection("schedule").add(t).then((function(e){return ue(new Date)})).catch((function(e){return console.error("Error adding document: ",e)}))}()},children:"Save change"}),Object(c.jsx)("button",{type:"button",className:"mdc-button mdc-button--raised shado-baground-textC mt-2","data-dismiss":"modal",children:"Cancel"})]})]})})})]})}),Ka=new g,Ga=[b.a],Ja=Object(p.d)(et,void 0,p.a.apply(void 0,Ga));function Xa(){return Qa.apply(this,arguments)}function Qa(){return(Qa=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(u.render)(Object(c.jsx)(m.a,{store:Ja,children:Object(c.jsxs)(tt.a,{children:[Object(c.jsx)(Wa,{exact:!0,path:["/","/home"],component:st}),Object(c.jsx)(Wa,{path:"/room/:rid",component:Da}),Object(c.jsx)(at.b,{path:"/join",component:Fa}),Object(c.jsx)(at.b,{path:"/signin",component:Ma}),Object(c.jsx)(at.b,{path:"/signup",component:Va}),Object(c.jsx)(at.b,{path:"/forgotPassword",component:Ba}),Object(c.jsx)(Wa,{path:"/schedule",component:Ya})]})}),document.getElementById("myDiv"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ne.init({store:Ja}),s()(Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ka.debug("DOM ready"),Xa();case 2:case"end":return e.stop()}}),e)}))))}},[[355,1,2]]]);
//# sourceMappingURL=main.9a84858f.chunk.js.map